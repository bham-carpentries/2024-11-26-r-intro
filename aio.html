<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to R and R Studio: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to R and R Studio
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to R and R Studio
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to R and R Studio
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-rstudio-intro.html">1. Introduction to R and RStudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-data-structures-and-subsetting.html">2. Data Structures and Subsetting Data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-exploring-dataframes.html">3. Exploring Data Frames</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-seeking-help.html">4. R Packages and Seeking Help</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-dplyr.html">5. Manipulating Tibbles With Dplyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-plot-ggplot2.html">6. Creating Publication-Quality Graphics with ggplot2</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-wrap.html">7. Wrap-up</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-rstudio-intro"><p>Content from <a href="01-rstudio-intro.html">Introduction to R and RStudio</a></p>
<hr>
<p>Last updated on 2024-11-25 |

        <a href="https://github.com/kkh451/r_intro/edit/main/episodes/01-rstudio-intro.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I find my way around RStudio?</li>
<li>How can I manage my projects in RStudio?</li>
<li>How to interact with R for data analysis and coding?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the purpose and functionality of each pane in RStudio</li>
<li>Locate key buttons and options within the RStudio interface</li>
<li>Create and manage self-contained projects in RStudio</li>
<li>Define and work with variables</li>
<li>Assign data to a variable</li>
<li>Use mathematical and comparison operators</li>
<li>Call and work with functions</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<hr class="half-width">
<p>Science is a multi-step process: once you’ve designed an experiment
and collected data, the real fun begins with analysis!</p>
<p>Although we could use a spreadsheet in Microsoft Excel or Google
sheets to analyze our data, these tools are limited in their flexibility
and accessibility. Critically, they also are difficult to share steps
which explore and change the raw data, which is key to <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003285" class="external-link">“reproducible”
research</a>.</p>
<p>Therefore, this lesson will teach you how to begin exploring your
data using R and RStudio. The R program is available for Windows, Mac,
and Linux operating systems, and is a freely-available where you
downloaded it above. To run R, all you need is the R program.</p>
<p>However, to make using R easier, we will use the program RStudio,
which we also downloaded above. RStudio is a free, open-source,
Integrated Development Environment (IDE). It provides a built-in editor,
works on all platforms (including on servers) and provides many
advantages such as integration with version control and project
management.</p>
</section><section><h2 class="section-heading" id="before-starting-the-workshop">Before Starting The Workshop<a class="anchor" aria-label="anchor" href="#before-starting-the-workshop"></a>
</h2>
<hr class="half-width">
<p>Please ensure you have the latest version of R and RStudio installed
on your machine. This is important, as some packages used in the
workshop may not install correctly (or at all) if R is not up to
date.</p>
<ul>
<li><a href="https://www.r-project.org/" class="external-link">Download and install the latest
version of R here</a></li>
<li><a href="https://www.rstudio.com/products/rstudio/download/#download" class="external-link">Download
and install RStudio here</a></li>
</ul></section><section><h2 class="section-heading" id="data-set">Data Set<a class="anchor" aria-label="anchor" href="#data-set"></a>
</h2>
<hr class="half-width">
<p>We will begin with raw data, perform exploratory analyses, and learn
how to plot results graphically. We’ll use a version of the Palmer
Penguins dataset dataset from <a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">&lt;https://allisonhorst.github.io/palmerpenguins/&gt;</a>
that we have adapted for the purposes of this course. The Palmer
Penguins dataset provides morphological measurements (bill length, bill
depth, flipper length, body mass) for three penguin species (Adélie,
Chinstrap, and Gentoo) collected from three islands (Torgersen, Dream,
and Biscoe) in the Palmer Archipelago, Antarctica.</p>
<figure><img src="fig/penguins_ccby4_by_at_allison_horst.png" alt="Meet the penguins cartoon illustration of the penguin species Chinstrap! Adelie! and Gentoo! by @Allison Horst (CC-BY-4.0)" class="figure mx-auto d-block"></figure><p>Can you read the data into R? Can you plot relationship between bill
length and flipper length? Can you calculate the mean body mass of
penguins on the island of Dream? By the end of these lessons you will be
able to explore key relationships in the data in minutes!</p>
</section><section><h2 class="section-heading" id="introduction-to-rstudio">Introduction to RStudio<a class="anchor" aria-label="anchor" href="#introduction-to-rstudio"></a>
</h2>
<hr class="half-width">
<p>Throughout this lesson, we’re going to teach you some of the
fundamentals of the R language as well as some best practices for
organizing code for scientific projects that will make your life
easier.</p>
<p><strong>Basic layout</strong></p>
<p>When you first open RStudio, you will be greeted by three panels:</p>
<ul>
<li>The interactive R console/Terminal (entire left)</li>
<li>Environment/History/Connections (tabbed in upper right)</li>
<li>Files/Plots/Packages/Help/Viewer (tabbed in lower right)</li>
</ul>
<figure><img src="fig/01-rstudio.png" alt="RStudio layout" class="figure mx-auto d-block"></figure><p>Once you open files, such as R scripts, an editor panel will also
open in the top left.</p>
<figure><img src="fig/01-rstudio-script.png" alt="RStudio layout with .R file open" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="projects-in-r-studio">Projects in R Studio<a class="anchor" aria-label="anchor" href="#projects-in-r-studio"></a>
</h2>
<hr class="half-width">
<p>The scientific process is naturally incremental, and many projects
start life as random notes, some code, then a manuscript, and eventually
everything is a bit mixed together.</p>
<blockquote class="twitter-tweet">
<p>
Managing your projects in a reproducible fashion doesn’t just make your
science reproducible, it makes your life easier.
</p>
— Vince Buffalo (<span class="citation">@vsbuffalo</span>)
<a href="https://twitter.com/vsbuffalo/status/323638476153167872" class="external-link">April
15, 2013</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><p>Most people tend to organize their projects like this:</p>
<figure><img src="fig/bad_layout.png" alt="Screenshot of file manager demonstrating bad project organisation" class="figure mx-auto d-block"></figure><p>There are many reasons why we should <em>ALWAYS</em> avoid this:</p>
<ol style="list-style-type: decimal">
<li>It is really hard to tell which version of your data is the original
and which is the modified;</li>
<li>It gets really messy because it mixes files with various extensions
together;</li>
<li>It probably takes you a lot of time to actually find things, and
relate the correct figures to the exact code that has been used to
generate it;</li>
</ol>
<p>A good project layout will ultimately make your life easier:</p>
<ul>
<li>It will help ensure the integrity of your data;</li>
<li>It makes it simpler to share your code with someone else (a
lab-mate, collaborator, or supervisor);</li>
<li>It allows you to easily upload your code with your manuscript
submission;</li>
<li>It makes it easier to pick the project back up after a break.</li>
</ul>
<div class="section level3">
<h3 id="creating-a-self-contained-project">Creating a self-contained project<a class="anchor" aria-label="anchor" href="#creating-a-self-contained-project"></a>
</h3>
<p>Fortunately, there are tools and packages which can help you manage
your work effectively.</p>
<p>One of the most powerful and useful aspects of RStudio is its project
management functionality. We’ll be using this today to create a
self-contained, reproducible project.</p>
<p>We’re going to create a new project in RStudio:</p>
<ol style="list-style-type: decimal">
<li>Click the “File” menu button, then “New Project”.</li>
<li>Click “New Directory”.</li>
<li>Click “New Project”.</li>
<li>Type in the name of the directory to store your project,
e.g. “my_project”.</li>
<li>If available, select the checkbox for “Create a git
repository.”</li>
<li>Click the “Create Project” button.</li>
</ol>
</div>
<div class="section level3">
<h3 id="best-practices-for-project-organization">Best practices for project organization<a class="anchor" aria-label="anchor" href="#best-practices-for-project-organization"></a>
</h3>
<p>Although there is no “best” way to lay out a project, there are some
general principles to adhere to that will make project management
easier:</p>
<div class="section level4">
<h4 id="treat-data-as-read-only">Treat data as read only<a class="anchor" aria-label="anchor" href="#treat-data-as-read-only"></a>
</h4>
<p>This is probably the most important goal of setting up a project.
Data is typically time consuming and/or expensive to collect. Working
with them interactively (e.g., in Excel) where they can be modified
means you are never sure of where the data came from, or how it has been
modified since collection. It is therefore a good idea to treat your
data as “read-only”.</p>
</div>
<div class="section level4">
<h4 id="data-cleaning">Data Cleaning<a class="anchor" aria-label="anchor" href="#data-cleaning"></a>
</h4>
<p>In many cases your data will be “dirty”: it will need significant
preprocessing to get into a format R (or any other programming language)
will find useful. This task is sometimes called “data munging”. Storing
these scripts in a separate folder, and creating a second “read-only”
data folder to hold the “cleaned” data sets can prevent confusion
between the two sets.</p>
</div>
<div class="section level4">
<h4 id="treat-generated-output-as-disposable">Treat generated output as disposable<a class="anchor" aria-label="anchor" href="#treat-generated-output-as-disposable"></a>
</h4>
<p>Anything generated by your scripts should be treated as disposable:
it should all be able to be regenerated from your scripts.</p>
<p>There are lots of different ways to manage this output. Having an
output folder with different sub-directories for each separate analysis
makes it easier later. Since many analyses are exploratory and don’t end
up being used in the final project, and some of the analyses get shared
between projects.</p>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-good-enough-practices-for-scientific-computing" class="callout-inner">
<h3 class="callout-title">Tip: Good Enough Practices for Scientific Computing</h3>
<div class="callout-content">
<p><a href="https://github.com/swcarpentry/good-enough-practices-in-scientific-computing/blob/gh-pages/good-enough-practices-for-scientific-computing.pdf" class="external-link">Good
Enough Practices for Scientific Computing</a> gives the following
recommendations for project organization:</p>
<ol style="list-style-type: decimal">
<li>Put each project in its own directory, which is named after the
project.</li>
<li>Put text documents associated with the project in the
<code>doc</code> directory.</li>
<li>Put raw data and metadata in the <code>data</code> directory, and
files generated during cleanup and analysis in a <code>results</code>
directory.</li>
<li>Put source for the project’s scripts and programs in the
<code>src</code> directory, and programs brought in from elsewhere or
compiled locally in the <code>bin</code> directory.</li>
<li>Name all files to reflect their content or function.</li>
</ol>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="use-project-subfolders">Use Project Subfolders<a class="anchor" aria-label="anchor" href="#use-project-subfolders"></a>
</h4>
<p>Create <code>data</code>, <code>src</code>, and <code>results</code>
directories in your project directory.</p>
<p>Copy the files penguins_teaching.csv, weather-data.csv, and
weather-data_v2.csv files from the zip file you downloaded as part of
the lesson set up to the data/ folder within your project. We will load
and use these files later in the course.</p>
<div id="tip-working-directory" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-working-directory" class="callout-inner">
<h3 class="callout-title">Tip: Working directory</h3>
<div class="callout-content">
<p>Knowing R’s current working directory is important because when you
need to access other files (for example, to import a data file), R will
look for them relative to the current working directory.</p>
<p>Each time you create a new RStudio Project, it will create a new
directory for that project. When you open an existing
<code>.Rproj</code> file, it will open that project and set R’s working
directory to the folder that file is in.</p>
<p>You can check the current working directory with the
<code>getwd()</code> command, or by using the menus in RStudio.</p>
<ol style="list-style-type: decimal">
<li>In the console, type <code>getwd()</code> (“wd” is short for
“working directory”) and hit Enter.</li>
<li>In the Files pane, double click on the <code>data</code> folder to
open it (or navigate to any other folder you wish). To get the Files
pane back to the current working directory, click “More” and then select
“Go To Working Directory”.</li>
</ol>
<p>You can change the working directory with <code>setwd()</code>, or by
using RStudio menus.</p>
<ol style="list-style-type: decimal">
<li>In the console, type <code>setwd("data")</code> and hit Enter. Type
<code>getwd()</code> and hit Enter to see the new working
directory.</li>
<li>In the menus at the top of the RStudio window, click the “Session”
menu button, and then select “Set Working Directory” and then “Choose
Directory”. Next, in the windows navigator that opens, navigate back to
the project directory, and click “Open”. Note that a <code>setwd</code>
command will automatically appear in the console.</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="workflow-within-rstudio">Workflow within RStudio<a class="anchor" aria-label="anchor" href="#workflow-within-rstudio"></a>
</h2>
<hr class="half-width">
<p>There are two main ways one can work within RStudio:</p>
<ol style="list-style-type: decimal">
<li>Test and play within the interactive R console then copy code into a
.R file to run later.</li>
</ol>
<ul>
<li>This works well when doing small tests and initially starting
off.</li>
<li>It quickly becomes laborious</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Start writing in a .R file and use RStudio’s short cut keys for the
Run command to push the current line, selected lines or modified lines
to the interactive R console.</li>
</ol>
<ul>
<li>This is a great way to start; all your code is saved for later</li>
<li>You will be able to run the file you create from within RStudio or
using R’s <code>source()</code> function.</li>
</ul>
<p>In this lesson we’ll spend a lot of time working in the interactive
console. We’ll move on to creating scripts in the next lesson.</p>
<div id="tip-running-segments-of-your-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-running-segments-of-your-code" class="callout-inner">
<h3 class="callout-title">Tip: Running segments of your code</h3>
<div class="callout-content">
<p>RStudio offers you great flexibility in running code from within the
editor window. There are buttons, menu choices, and keyboard shortcuts.
To run the current line, you can</p>
<ol style="list-style-type: decimal">
<li>click on the <code>Run</code> button above the editor panel, or</li>
<li>select “Run Lines” from the “Code” menu, or</li>
<li>hit <kbd>Ctrl</kbd>+<kbd>Return</kbd> in Windows or Linux or
<kbd>⌘</kbd>+<kbd>Return</kbd> on OS X. (This shortcut can also be seen
by hovering the mouse over the button). To run a block of code, select
it and then <code>Run</code>. If you have modified a line of code within
a block of code you have just run, there is no need to reselect the
section and <code>Run</code>, you can use the next button along,
<code>Re-run the previous region</code>. This will run the previous code
block including the modifications you have made.</li>
</ol>
</div>
</div>
</div>
<div id="r-scripts" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="r-scripts" class="callout-inner">
<h3 class="callout-title">R scripts</h3>
<div class="callout-content">
<p>Any commands that you write in the R console can be saved to a file
to be re-run again. Files containing R code to be run in this way are
called R scripts. R scripts have <code>.R</code> at the end of their
names to let you know what they are.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="introduction-to-r">Introduction to R<a class="anchor" aria-label="anchor" href="#introduction-to-r"></a>
</h2>
<hr class="half-width">
<p>Much of your time in R will be spent in the R interactive console.
This is where you will run all of your code, and can be a useful
environment to try out ideas before adding them to an R script file.
This console in RStudio is the same as the one you would get if you
typed in <code>R</code> in your command-line environment.</p>
<p>The first thing you will see in the R interactive session is a bunch
of information, followed by a “&gt;” and a blinking cursor. In many ways
this is similar to the shell environment you learned about during the
shell lessons: it operates on the same idea of a “Read, evaluate, print
loop”: you type in commands, R tries to execute them, and then returns a
result.</p>
</section><section><h2 class="section-heading" id="using-r-as-a-calculator">Using R as a calculator<a class="anchor" aria-label="anchor" href="#using-r-as-a-calculator"></a>
</h2>
<hr class="half-width">
<p>The simplest thing you could do with R is to do arithmetic:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">+</span> <span class="fl">100</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 101</code></pre>
</div>
<p>And R will print out the answer, with a preceding “[1]”. [1] is the
index of the first element of the line being printed in the console.</p>
<p>If you type in an incomplete command, R will wait for you to complete
it. If you are familiar with Unix Shell’s bash, you may recognize this
behavior from bash.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">+</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>+</code></pre>
</div>
<p>Any time you hit return and the R session shows a “+” instead of a
“&gt;”, it means it’s waiting for you to complete the command. If you
want to cancel a command you can hit <kbd>Esc</kbd> and RStudio will
give you back the “&gt;” prompt.</p>
<div id="tip-canceling-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-canceling-commands" class="callout-inner">
<h3 class="callout-title">Tip: Canceling commands</h3>
<div class="callout-content">
<p>If you’re using R from the command line instead of from within
RStudio, you need to use <kbd>Ctrl</kbd>+<kbd>C</kbd> instead of
<kbd>Esc</kbd> to cancel the command. This applies to Mac users as
well!</p>
<p>Canceling a command isn’t only useful for killing incomplete
commands: you can also use it to tell R to stop running code (for
example if it’s taking much longer than you expect), or to get rid of
the code you’re currently writing.</p>
</div>
</div>
</div>
<p>When using R as a calculator, the order of operations is the same as
you would have learned back in school.</p>
<p>From highest to lowest precedence:</p>
<ul>
<li>Parentheses: <code>(</code>, <code>)</code>
</li>
<li>Exponents: <code>^</code> or <code>**</code>
</li>
<li>Multiply: <code>*</code>
</li>
<li>Divide: <code>/</code>
</li>
<li>Add: <code>+</code>
</li>
<li>Subtract: <code>-</code>
</li>
</ul>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 13</code></pre>
</div>
<p>Use parentheses to group operations in order to force the order of
evaluation if it differs from the default, or to make clear what you
intend.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 16</code></pre>
</div>
<p>This can get unwieldy when not needed, but clarifies your intentions.
Remember that others may later read your code.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fl">3</span> <span class="op">+</span> <span class="op">(</span><span class="fl">5</span> <span class="op">*</span> <span class="op">(</span><span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># hard to read</span></span>
<span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span>       <span class="co"># clear, if you remember the rules</span></span>
<span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span> <span class="op">*</span> <span class="op">(</span><span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span>     <span class="co"># if you forget some rules, this might help</span></span></code></pre>
</div>
<p>The text after each line of code is called a “comment”. Anything that
follows after the hash (or octothorpe) symbol <code>#</code> is ignored
by R when it executes code.</p>
<p>Really small or large numbers get a scientific notation:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">/</span><span class="fl">10000</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2e-04</code></pre>
</div>
<p>Which is shorthand for “multiplied by <code>10^XX</code>”. So
<code>2e-4</code> is shorthand for <code>2 * 10^(-4)</code>.</p>
<p>You can write numbers in scientific notation too:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">5e3</span>  <span class="co"># Note the lack of minus here</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5000</code></pre>
</div>
</section><section><h2 class="section-heading" id="mathematical-functions">Mathematical functions<a class="anchor" aria-label="anchor" href="#mathematical-functions"></a>
</h2>
<hr class="half-width">
<p>R has many built in mathematical functions. To call a function, we
can type its name, followed by open and closing parentheses. Functions
take arguments as inputs, anything we type inside the parentheses of a
function is considered an argument. Depending on the function, the
number of arguments can vary from none to multiple. For example:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">getwd</span><span class="op">(</span><span class="op">)</span> <span class="co">#returns an absolute filepath</span></span></code></pre>
</div>
<p>doesn’t require an argument, whereas for the next set of mathematical
functions we will need to supply the function a value in order to
compute the result.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sin</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># trigonometry functions</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.841471</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># natural logarithm</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log10</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co"># base-10 logarithm</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">exp</span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span> <span class="co"># e^(1/2)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1.648721</code></pre>
</div>
<p>Don’t worry about trying to remember every function in R. You can
look them up on Google, or if you can remember the start of the
function’s name, use the tab completion in RStudio.</p>
<p>This is one advantage that RStudio has over R on its own, it has
auto-completion abilities that allow you to more easily look up
functions, their arguments, and the values that they take.</p>
<p>Typing a <code>?</code> before the name of a command will open the
help page for that command. When using RStudio, this will open the
‘Help’ pane; if using R in the terminal, the help page will open in your
browser. The help page will include a detailed description of the
command and how it works. Scrolling to the bottom of the help page will
usually show a collection of code examples which illustrate command
usage.</p>
</section><section><h2 class="section-heading" id="comparing-things">Comparing things<a class="anchor" aria-label="anchor" href="#comparing-things"></a>
</h2>
<hr class="half-width">
<p>We can also do comparisons in R:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">==</span> <span class="fl">1</span>  <span class="co"># equality (note two equals signs, read as "is equal to")</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">!=</span> <span class="fl">2</span>  <span class="co"># inequality (read as "is not equal to")</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">2</span>  <span class="co"># less than</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;=</span> <span class="fl">1</span>  <span class="co"># less than or equal to</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">0</span>  <span class="co"># greater than</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">9</span> <span class="co"># greater than or equal to</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div id="tip-comparing-numbers" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-comparing-numbers" class="callout-inner">
<h3 class="callout-title">Tip: Comparing Numbers</h3>
<div class="callout-content">
<p>A word of warning about comparing numbers: you should never use
<code>==</code> to compare two numbers unless they are integers (a data
type which can specifically represent only whole numbers).</p>
<p>Computers may only represent decimal numbers with a certain degree of
precision, so two numbers which look the same when printed out by R, may
actually have different underlying representations and therefore be
different by a small margin of error (called Machine numeric
tolerance).</p>
<p>Instead you should use the <code>all.equal</code> function.</p>
<p>Further reading: <a href="https://floating-point-gui.de/" class="external-link">http://floating-point-gui.de/</a></p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="variables-and-assignment">Variables and assignment<a class="anchor" aria-label="anchor" href="#variables-and-assignment"></a>
</h2>
<hr class="half-width">
<p>We can store values in variables using the assignment operator
<code>&lt;-</code>, like this:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">/</span><span class="fl">40</span></span></code></pre>
</div>
<p>Notice that assignment does not print a value. Instead, we stored it
for later in something called a <strong>variable</strong>.
<code>x</code> now contains the <strong>value</strong>
<code>0.025</code>:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.025</code></pre>
</div>
<p>More precisely, the stored value is a <em>decimal approximation</em>
of this fraction called a <a href="https://en.wikipedia.org/wiki/Floating_point" class="external-link">floating point
number</a>.</p>
<p>Look for the <code>Environment</code> tab in the top right panel of
RStudio, and you will see that <code>x</code> and its value have
appeared. Our variable <code>x</code> can be used in place of a number
in any calculation that expects a number:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">log</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -3.688879</code></pre>
</div>
<p>Notice also that variables can be reassigned:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></code></pre>
</div>
<p><code>x</code> used to contain the value 0.025 and now it has the
value 100.</p>
<p>Assignment values can contain the variable being assigned to:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span> <span class="co">#notice how RStudio updates its description of x on the top right tab</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<p>The right hand side of the assignment can be any valid R expression.
The right hand side is <em>fully evaluated</em> before the assignment
occurs.</p>
<p>Variable names can contain letters, numbers, underscores and periods
but no spaces. They must start with a letter or a period followed by a
letter (they cannot start with a number nor an underscore). Variables
beginning with a period are hidden variables. Different people use
different conventions for long variable names, these include</p>
<ul>
<li>periods.between.words</li>
<li>underscores_between_words</li>
<li>camelCaseToSeparateWords</li>
</ul>
<p>What you use is up to you, but <strong>be consistent</strong>.</p>
<p>It is also possible to use the <code>=</code> operator for
assignment:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">40</span></span></code></pre>
</div>
<p>But this is much less common among R users. The most important thing
is to <strong>be consistent</strong> with the operator you use. There
are occasionally places where it is less confusing to use
<code>&lt;-</code> than <code>=</code>, and it is the most common symbol
used in the community. So the recommendation is to use
<code>&lt;-</code>.</p>
</section><section><h2 class="section-heading" id="vectorization">Vectorization<a class="anchor" aria-label="anchor" href="#vectorization"></a>
</h2>
<hr class="half-width">
<p>One final thing to be aware of is that R is <em>vectorized</em>,
meaning that variables and functions can have vectors as values. A
vector is 1 dimensional array of ordered values all of the same data
type. For example:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4 5</code></pre>
</div>
<p>We can assign a vector to a variable:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">5</span><span class="op">:</span><span class="fl">10</span></span></code></pre>
</div>
<p>We can apply functions to all the elements of a vector:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  2  4  6  8 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  2  4  8 16 32</code></pre>
</div>
<p>We can also create vectors “by hand” using the <code>c()</code>
function; this tersely named function is used to <em>combine</em> values
into a vector; these values can, themselves, be vectors:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  2  4 -1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="va">x</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  5  6  7  8  9 10  2  2  3</code></pre>
</div>
<p>Vectors aren’t limited to storing numbers:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"def"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a"   "b"   "c"   "def"</code></pre>
</div>
<p>R comes with a few built in constants, containing useful values:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">LETTERS</span></span>
<span><span class="va">letters</span></span>
<span><span class="va">month.abb</span></span>
<span><span class="va">month.name</span></span></code></pre>
</div>
<p>We will use some of these in the examples that follow.</p>
<div class="section level3">
<h3 id="vector-lengths">Vector lengths<a class="anchor" aria-label="anchor" href="#vector-lengths"></a>
</h3>
<p>We can calculate how many elements a vector contains using the
<code>length()</code> function:</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">letters</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 26</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="subsetting-vectors">Subsetting vectors<a class="anchor" aria-label="anchor" href="#subsetting-vectors"></a>
</h3>
<p>Having defined a vector, it’s often useful to <em>extract</em> parts
of a vector. We do this with the <code>[]</code> operator. Using the
built in <code>month.name</code> vector:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "February"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "February" "March"    "April"   </code></pre>
</div>
<p>Let’s unpick the second example; <code>2:4</code> generates the
sequence 2,3,4. This gets passed to the extract operator
<code>[]</code>. We can also generate this sequence using the
<code>c()</code> function:</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "February" "March"    "April"   </code></pre>
</div>
<div id="vector-numbering-in-r-starts-at-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="vector-numbering-in-r-starts-at-1" class="callout-inner">
<h3 class="callout-title">Vector numbering in R starts at 1</h3>
<div class="callout-content">
<p>In many programming languages (C and python, for example), the first
element of a vector has an index of 0. In R, the first element is 1.</p>
</div>
</div>
</div>
<p>Values are returned in the order that we specify the indices. We can
extract the same element more than once:</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "April"    "March"    "February"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "January"  "January"  "February" "March"    "April"   </code></pre>
</div>
<p>If we try and extract an element that doesn’t exist in the vector,
the missing values are <code>NA</code>:</p>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="fl">10</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "October"  "November" "December" NA        </code></pre>
</div>
<div id="missing-data" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="missing-data" class="callout-inner">
<h3 class="callout-title">Missing data</h3>
<div class="callout-content">
<p><code>NA</code> is a special value, that is used to represent “not
available”, or “missing”. If we perform computations which include
<code>NA</code>, the result is usually <code>NA</code>:</p>
<div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">+</span> <span class="cn">NA</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<p>This raises an interesting point; how do we test if a value is
<code>NA</code>? This doesn’t work:</p>
<div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">x</span> <span class="op">==</span> <span class="cn">NA</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<div class="section level2">
<h2 id="handling-special-values">Handling special values<a class="anchor" aria-label="anchor" href="#handling-special-values"></a>
</h2>
<p>There are a number of special functions you can use to handle missing
data, and other special values:</p>
<ul>
<li>
<code>is.na</code> will return all positions in a vector, matrix, or
data.frame containing <code>NA</code>.</li>
<li>likewise, <code>is.nan</code>, and <code>is.infinite</code> will do
the same for <code>NaN</code> and <code>Inf</code>.</li>
<li>
<code>is.finite</code> will return all positions in a vector,
matrix, or data.frame that do not contain <code>NA</code>,
<code>NaN</code> or <code>Inf</code>.</li>
<li>
<code>na.omit</code> will filter out all missing values from a
vector</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="skipping-and-removing-elements">Skipping and removing elements<a class="anchor" aria-label="anchor" href="#skipping-and-removing-elements"></a>
</h3>
<p>If we use a negative number as the index of a vector, R will return
every element <em>except</em> for the one specified:</p>
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="op">-</span><span class="fl">2</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "January"   "March"     "April"     "May"       "June"      "July"
 [7] "August"    "September" "October"   "November"  "December" </code></pre>
</div>
<p>We can skip multiple elements:</p>
<div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span><span class="op">]</span>  <span class="co"># or month.name[-c(1,5)]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "February"  "March"     "April"     "June"      "July"      "August"
 [7] "September" "October"   "November"  "December" </code></pre>
</div>
<div id="tip-order-of-operations" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-order-of-operations" class="callout-inner">
<h3 class="callout-title">Tip: Order of operations</h3>
<div class="callout-content">
<p>A common error occurs when trying to skip slices of a vector. Most
people first try to negate a sequence like so:</p>
<div class="codewrapper sourceCode" id="cb81">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<p>This gives a somewhat cryptic error:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in month.name[-1:3]: only 0's may be mixed with negative subscripts</code></pre>
</div>
<p>But remember the order of operations. <code>:</code> is really a
function, so what happens is it takes its first argument as -1, and
second as 3, so generates the sequence of numbers:
<code>-1, 0, 1, 2, 3</code>.</p>
<p>The correct solution is to wrap that function call in brackets, so
that the <code>-</code> operator is applied to the sequence:</p>
<div class="codewrapper sourceCode" id="cb83">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] -1 -2 -3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb85">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">month.name</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "April"     "May"       "June"      "July"      "August"    "September"
[7] "October"   "November"  "December" </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="subsetting-with-logical-vectors">Subsetting with logical vectors<a class="anchor" aria-label="anchor" href="#subsetting-with-logical-vectors"></a>
</h3>
<p>As well as providing a list of indices we want to keep (or delete, if
we prefix them with <code>-</code>), we can pass a <em>logical
vector</em> to R indicating the indices we wish to select:</p>
<div class="codewrapper sourceCode" id="cb87">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fourmonths</span> <span class="op">&lt;-</span> <span class="va">month.name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="va">fourmonths</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "January"  "February" "March"    "April"   </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb89">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fourmonths</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "January" "March"   "April"  </code></pre>
</div>
<p>What happens if we supply a logical vector that is shorter than the
vector we’re extracting the elements from?</p>
<div class="codewrapper sourceCode" id="cb91">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fourmonths</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">FALSE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "January" "March"  </code></pre>
</div>
<p>This illustrates the idea of <em>vector recycling</em>; the
<code>[]</code> extract operator “recycles” the subsetting vector:</p>
<div class="codewrapper sourceCode" id="cb93">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fourmonths</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "January" "March"  </code></pre>
</div>
<p>This can be useful, but can easily catch you out.</p>
<p>The idea of selecting elements of a vector using a logical subsetting
vector may seem a bit esoteric, and a lot more typing than just
selecting the elements you want by index. It becomes really useful when
we write code to generate the logical vector:</p>
<div class="codewrapper sourceCode" id="cb95">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.69</span>, <span class="fl">0.51</span>, <span class="fl">0.39</span><span class="op">)</span></span>
<span><span class="va">my_vector</span> <span class="op">&gt;</span> <span class="fl">0.5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE  TRUE FALSE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb97">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_vector</span><span class="op">[</span><span class="va">my_vector</span> <span class="op">&gt;</span> <span class="fl">0.5</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0.69 0.51</code></pre>
</div>
<div id="tip-combining-logical-conditions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-combining-logical-conditions" class="callout-inner">
<h3 class="callout-title">Tip: Combining logical conditions</h3>
<div class="callout-content">
<p>There are many situations in which you will wish to combine multiple
logical criteria. For example, we might want to find all the elements
that are between two values. Several operations for combining logical
vectors exist in R:</p>
<ul>
<li>
<code>&amp;</code>, the “logical AND” operator: returns
<code>TRUE</code> if both the left and right are <code>TRUE</code>.</li>
<li>
<code>|</code>, the “logical OR” operator: returns
<code>TRUE</code>, if either the left or right (or both) are
<code>TRUE</code>.</li>
</ul>
<p>The recycling rule applies with both of these, so
<code>TRUE &amp; c(TRUE, FALSE, TRUE)</code> will compare the first
<code>TRUE</code> on the left of the <code>&amp;</code> sign with each
of the three conditions on the right.</p>
<p>You may sometimes see <code>&amp;&amp;</code> and <code>||</code>
instead of <code>&amp;</code> and <code>|</code>. These operators do not
use the recycling rule: they only look at the first element of each
vector and ignore the remaining elements. The longer operators are
mainly used in programming, rather than data analysis.</p>
<ul>
<li>
<code>!</code>, the “logical NOT” operator: converts
<code>TRUE</code> to <code>FALSE</code> and <code>FALSE</code> to
<code>TRUE</code>. It can negate a single logical condition
(e.g. <code>!TRUE</code> becomes <code>FALSE</code>), or a whole vector
of conditions(e.g. <code>!c(TRUE, FALSE)</code> becomes
<code>c(FALSE, TRUE)</code>).</li>
</ul>
<p>Additionally, you can compare the elements within a single vector
using the <code>all</code> function (which returns <code>TRUE</code> if
every element of the vector is <code>TRUE</code>) and the
<code>any</code> function (which returns <code>TRUE</code> if one or
more elements of the vector are <code>TRUE</code>).</p>
</div>
</div>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1</h3>
<div class="callout-content">
<p>Which of the following are valid R variable names?</p>
<div class="codewrapper sourceCode" id="cb99">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" tabindex="-1"></a>min_depth</span>
<span id="cb99-2"><a href="#cb99-2" tabindex="-1"></a>max.depth</span>
<span id="cb99-3"><a href="#cb99-3" tabindex="-1"></a>_region</span>
<span id="cb99-4"><a href="#cb99-4" tabindex="-1"></a>.mass</span>
<span id="cb99-5"><a href="#cb99-5" tabindex="-1"></a>MaxLength</span>
<span id="cb99-6"><a href="#cb99-6" tabindex="-1"></a>min<span class="sc">-</span>length</span>
<span id="cb99-7"><a href="#cb99-7" tabindex="-1"></a><span class="dv">15</span>Ndelta</span>
<span id="cb99-8"><a href="#cb99-8" tabindex="-1"></a>celsius2kelvin</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The following can be used as R variables:</p>
<div class="codewrapper sourceCode" id="cb100">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">min_depth</span></span>
<span><span class="va">max.depth</span></span>
<span><span class="va">MaxLength</span></span>
<span><span class="va">celsius2kelvin</span></span></code></pre>
</div>
<p>The following creates a hidden variable:</p>
<div class="codewrapper sourceCode" id="cb101">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.mass</span></span></code></pre>
</div>
<p>The following will not be able to be used to create a variable</p>
<div class="codewrapper sourceCode" id="cb102">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" tabindex="-1"></a>_region</span>
<span id="cb102-2"><a href="#cb102-2" tabindex="-1"></a>min<span class="sc">-</span>length</span>
<span id="cb102-3"><a href="#cb102-3" tabindex="-1"></a><span class="dv">15</span>Ndelta</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2</h3>
<div class="callout-content">
<p>What will be the value of each variable after each statement in the
following program?</p>
<div class="codewrapper sourceCode" id="cb103">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="fl">47.5</span></span>
<span><span class="va">depth</span> <span class="op">&lt;-</span> <span class="fl">122</span></span>
<span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.3</span></span>
<span><span class="va">depth</span> <span class="op">&lt;-</span> <span class="va">depth</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb104">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="fl">47.5</span></span></code></pre>
</div>
<p>This will give a value of 47.5 for the variable mass</p>
<div class="codewrapper sourceCode" id="cb105">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">depth</span> <span class="op">&lt;-</span> <span class="fl">122</span></span></code></pre>
</div>
<p>This will give a value of 122 for the variable depth</p>
<div class="codewrapper sourceCode" id="cb106">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&lt;-</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2.3</span></span></code></pre>
</div>
<p>This will multiply the existing value of 47.5 by 2.3 to give a new
value of 109.25 to the variable mass.</p>
<div class="codewrapper sourceCode" id="cb107">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">depth</span> <span class="op">&lt;-</span> <span class="va">depth</span> <span class="op">-</span> <span class="fl">20</span></span></code></pre>
</div>
<p>This will subtract 20 from the existing value of 122 to give a new
value of 102 to the variable depth.</p>
</div>
</div>
</div>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3</h3>
<div class="callout-content">
<p>Run the code from the previous challenge, and write a command to
compare mass to depth. Is mass larger than depth?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to challenge 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>One way of answering this question in R is to use the
<code>&gt;</code> to set up the following:</p>
<div class="codewrapper sourceCode" id="cb108">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mass</span> <span class="op">&gt;</span> <span class="va">depth</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<p>This should yield a boolean value of TRUE since 109.25 is greater
than 102.</p>
</div>
</div>
</div>
</div>
<div id="challenge-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4" class="callout-inner">
<h3 class="callout-title">Challenge 4</h3>
<div class="callout-content">
<p>Return a vector containing the letters of the alphabet in reverse
order</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solution to challenge 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>We can extract the elements in reverse order by generating the
sequence 26, 25, … 1 using the <code>:</code> operator:</p>
<div class="codewrapper sourceCode" id="cb110">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">letters</span><span class="op">[</span><span class="fl">26</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "z" "y" "x" "w" "v" "u" "t" "s" "r" "q" "p" "o" "n" "m" "l" "k" "j" "i" "h"
[20] "g" "f" "e" "d" "c" "b" "a"</code></pre>
</div>
<p>Although this works, it makes the assumption that
<code>letters</code> will always be length 26. Although this is probably
a safe assumption in English, other languages may have more (or fewer)
letters in their alphabet. It is good practice to avoid assuming
<em>anything</em> about your data.</p>
<p>We can avoid assuming <code>letters</code> is length 26, by using the
<code>length()</code> function:</p>
<div class="codewrapper sourceCode" id="cb112">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">letters</span><span class="op">[</span><span class="fu">length</span><span class="op">(</span><span class="va">letters</span><span class="op">)</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "z" "y" "x" "w" "v" "u" "t" "s" "r" "q" "p" "o" "n" "m" "l" "k" "j" "i" "h"
[20] "g" "f" "e" "d" "c" "b" "a"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-5" class="callout-inner">
<h3 class="callout-title">Challenge 5</h3>
<div class="callout-content">
<p>Given the following code:</p>
<div class="codewrapper sourceCode" id="cb114">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">5.4</span>, <span class="fl">6.2</span>, <span class="fl">7.1</span>, <span class="fl">7.5</span>, <span class="fl">4.8</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5.4 6.2 7.1 7.5 4.8</code></pre>
</div>
<p>Come up with at least 3 different commands that will produce the
following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6.2 7.1 7.5</code></pre>
</div>
<p>After you find 3 different commands, compare notes with your
neighbour. Did you have different strategies?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solution to challenge 5
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb117">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6.2 7.1 7.5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb119">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6.2 7.1 7.5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb121">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6.2 7.1 7.5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb123">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6.2 7.1 7.5</code></pre>
</div>
<p>(We can use vector recycling to make the previous example slightly
shorter:</p>
<div class="codewrapper sourceCode" id="cb125">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">x</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6.2 7.1 7.5</code></pre>
</div>
<p>The first element of the logical vector will be recycled)</p>
<p>We can construct a logical test to generate the logical vector:</p>
<div class="codewrapper sourceCode" id="cb127">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">6</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6.2 7.1 7.5</code></pre>
</div>
<p>Unpicking this example, <code>x &gt; 6</code> generates the logical
vector:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE  TRUE  TRUE FALSE</code></pre>
</div>
<p>Which is passed to the <code>[ ]</code> subsetting operator.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://rladiessydney.org/courses/ryouwithme/01-basicbasics-1/" class="external-link">An
Opinionated tour of RStudio from R-Ladies Sydney</a></li>
<li><a href="https://rstudio.github.io/cheatsheets/html/rstudio-ide.html?" class="external-link">RStudio
IDE Cheatsheet</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use RStudio to write and run R programs.</li>
<li>R has the usual arithmetic operators and mathematical
functions.</li>
<li>Use <code>&lt;-</code> to assign values to variables.</li>
<li>Use RStudio to create and manage projects with a consistent
structure.</li>
<li>Treat raw data as read-only.</li>
<li>Treat generated output as disposable.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-data-structures-and-subsetting"><p>Content from <a href="02-data-structures-and-subsetting.html">Data Structures and Subsetting Data</a></p>
<hr>
<p>Last updated on 2024-11-25 |

        <a href="https://github.com/kkh451/r_intro/edit/main/episodes/02-data-structures-and-subsetting.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I read data into R?</li>
<li>What are the basic data types in R?</li>
<li>How can I work with subsets of data in R?</li>
<li>How do I represent and work with categorical data in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Identify and understand the five main data types in R</li>
<li>Explore data frames and understand their relationship with vectors
and lists</li>
<li>To be able to subset vectors, lists, and data frames</li>
<li>To be able to extract individual and multiple elements: by index, by
name, using comparison operations</li>
<li>To be able to skip and remove elements from various data
structures</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>One of R’s most powerful features is its ability to deal with tabular
data - such as you may already have in a spreadsheet or a CSV file.
Let’s start by making a toy dataset in your <code>data/</code>
directory, called <code>weather-data.csv</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  island <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"torgersen"</span>, <span class="st">"biscoe"</span>, <span class="st">"dream"</span><span class="op">)</span>,</span>
<span>  temperature <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1.6</span>, <span class="fl">1.5</span>, <span class="op">-</span><span class="fl">2.6</span><span class="op">)</span>,</span>
<span>  snowfall <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<p>We can now save <code>weather</code> as a CSV file. It is good
practice to call the argument names explicitly so the function knows
what default values you are changing. Here we are setting
<code>row.names = FALSE</code>. Recall you can use
<code>?write.csv</code> to pull up the help file to check out the
argument names and their default values.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.csv</span><span class="op">(</span>x <span class="op">=</span> <span class="va">weather</span>, file <span class="op">=</span> <span class="st">"data/weather-data.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>The contents of the new file, <code>weather-data.csv</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>island,temperature,snowfall</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>torgersen,<span class="fl">1.6</span>,<span class="dv">0</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>biscoe,<span class="fl">1.5</span>,<span class="dv">0</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>dream,<span class="sc">-</span><span class="fl">2.6</span>,<span class="dv">1</span></span></code></pre>
</div>
<div id="tip-editing-text-files-in-r" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-editing-text-files-in-r" class="callout-inner">
<h3 class="callout-title">Tip: Editing Text files in R</h3>
<div class="callout-content">
<p>Alternatively, you can create <code>data/weather-data.csv</code>
using a text editor (Nano), or within RStudio with the <strong>File
-&gt; New File -&gt; Text File</strong> menu item.</p>
</div>
</div>
</div>
<p>We can load this into R via the following:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather-data.csv"</span><span class="op">)</span></span>
<span><span class="va">weather</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall
1 torgersen         1.6        0
2    biscoe         1.5        0
3     dream        -2.6        1</code></pre>
</div>
<p>The <code>read.table</code> function is used for reading in tabular
data stored in a text file where the columns of data are separated by
punctuation characters such as CSV files (csv = comma-separated values).
Tabs and commas are the most common punctuation characters used to
separate or delimit data points in csv files. For convenience R provides
2 other versions of <code>read.table</code>. These are:
<code>read.csv</code> for files where the data are separated with commas
and <code>read.delim</code> for files where the data are separated with
tabs. Of these three functions <code>read.csv</code> is the most
commonly used. If needed it is possible to override the default
delimiting punctuation marks for both <code>read.csv</code> and
<code>read.delim</code>.</p>
<div id="check-your-data-for-factors" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="check-your-data-for-factors" class="callout-inner">
<h3 class="callout-title">Check your data for factors</h3>
<div class="callout-content">
<p>In recent times, the default way how R handles textual data has
changed. Text data was interpreted by R automatically into a format
called “factors”. But there is an easier format that is called
“character”. We will hear about factors later, and what to use them for.
For now, remember that in most cases, they are not needed and only
complicate your life, which is why newer R versions read in text as
“character”. Check now if your version of R has automatically created
factors and convert them to “character” format:</p>
<ol style="list-style-type: decimal">
<li>Check the data types of your input by typing
<code>str(weather)</code>
</li>
<li>In the output, look at the three-letter codes after the colons: If
you see only “num” and “chr”, you can continue with the lesson and skip
this box. If you find “fct”, continue to step 3.</li>
<li>Prevent R from automatically creating “factor” data. That can be
done by the following code:
<code>options(stringsAsFactors = FALSE)</code>. Then, re-read the
weather table for the change to take effect.</li>
<li>You must set this option every time you restart R. To not forget
this, include it in your analysis script before you read in any data,
for example in one of the first lines.</li>
<li>For R versions greater than 4.0.0, text data is no longer converted
to factors anymore. So you can install this or a newer version to avoid
this problem. If you are working on an institute or company computer,
ask your administrator to do it.</li>
</ol>
</div>
</div>
</div>
<p>We can begin exploring our dataset right away, pulling out columns by
specifying them using the <code>$</code> operator:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">$</span><span class="va">temperature</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  1.6  1.5 -2.6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">$</span><span class="va">island</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "torgersen" "biscoe"    "dream"    </code></pre>
</div>
<p>We can also use the subsetting operator [] on our data frame. While a
vector is one dimensionl, a data frame is two dimensional, so we pass
two arguments to the [] operator.</p>
<p>The first argument indicates the row(s) we require and the second
indicates the columns. So to return rows 1 and 2, and columns 2 and 3 we
can use:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  temperature snowfall
1         1.6        0
2         1.5        0</code></pre>
</div>
<p>We can do other operations on the columns:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Let's convert the temperature from Celcius to Kelvin:</span></span>
<span><span class="va">weather</span><span class="op">$</span><span class="va">temperature</span> <span class="op">+</span> <span class="fl">273.15</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 274.75 274.65 270.55</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="st">"The location is"</span>, <span class="va">weather</span><span class="op">$</span><span class="va">island</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "The location is torgersen" "The location is biscoe"
[3] "The location is dream"    </code></pre>
</div>
<p>But what about</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">$</span><span class="va">temperature</span> <span class="op">+</span> <span class="va">weather</span><span class="op">$</span><span class="va">island</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in weather$temperature + weather$island: non-numeric argument to binary operator</code></pre>
</div>
<p>Understanding what happened here is key to successfully analyzing
data in R.</p>
<div class="section level3">
<h3 id="data-types">Data Types<a class="anchor" aria-label="anchor" href="#data-types"></a>
</h3>
<p>If you guessed that the last command will return an error because
<code>1.6</code> plus <code>"torgersen"</code> is nonsense, you’re right
- and you already have some intuition for an important concept in
programming called <em>data types</em>. We can ask what type of data
something is:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">weather</span><span class="op">$</span><span class="va">temperature</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<p>There are 5 main types: <code>double</code>, <code>integer</code>,
<code>complex</code>, <code>logical</code> and <code>character</code>.
For historic reasons, <code>double</code> is also called
<code>numeric</code>.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="fl">3.14</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "double"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span> <span class="co"># The L suffix forces the number to be an integer, since by default R uses float numbers</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="fl">1i</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "complex"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "logical"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="st">'banana'</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>No matter how complicated our analyses become, all data in R is
interpreted as one of these basic data types. This strictness has some
really important consequences.</p>
<p>A colleagues has added weather observations for another island. This
information is in the file <code>data/weather-data_v2.csv</code>.</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">file.show</span><span class="op">(</span><span class="st">"data/weather-data_v2.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>island,temperature,snowfall</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>torgersen,<span class="st">"1.6"</span>,<span class="dv">0</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>biscoe,<span class="st">"1.5"</span>,<span class="dv">0</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>dream,<span class="st">"-2.6"</span>,<span class="dv">1</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>deception,<span class="st">"-3.4 or 3.5"</span>,<span class="dv">1</span></span></code></pre>
</div>
<p>Load the new weather data like before, and check what type of data we
find in the <code>temperature</code> column:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file<span class="op">=</span><span class="st">"data/weather-data_v2.csv"</span><span class="op">)</span></span>
<span><span class="fu">typeof</span><span class="op">(</span><span class="va">weather</span><span class="op">$</span><span class="va">temperature</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>Oh no, our temperatures aren’t the double type anymore! If we try to
do the same math we did on them before, we run into trouble:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">$</span><span class="va">temperature</span> <span class="op">+</span> <span class="fl">273.15</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in weather$temperature + 273.15: non-numeric argument to binary operator</code></pre>
</div>
<p>What happened? The <code>weather</code> data we are working with is
something called a <em>data frame</em>. Data frames are one of the most
common and versatile types of <em>data structures</em> we will work with
in R. A given column in a data frame cannot be composed of different
data types. In this case, R does not read everything in the data frame
column <code>temperature</code> as a <em>double</em>, therefore the
entire column data type changes to something that is suitable for
everything in the column.</p>
<p>When R reads a csv file, it reads it in as a <em>data frame</em>.
Thus, when we loaded the <code>weather</code> csv file, it is stored as
a data frame. We can recognize data frames by the first row that is
written by the <code>str()</code> function:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	4 obs. of  4 variables:
 $ X          : int  1 2 3 4
 $ island     : chr  "torgersen" "biscoe" "dream" "deception"
 $ temperature: chr  "1.6" "1.5" "-2.6" "-3.4 or 3.5"
 $ snowfall   : int  1 0 1 1</code></pre>
</div>
<p><em>Data frames</em> are composed of rows and columns, where each
column has the same number of rows. Different columns in a data frame
can be made up of different data types (this is what makes them so
versatile), but everything in a given column needs to be the same type
(e.g., vector, factor, or list).</p>
<p>Let’s explore more about different data structures and how they
behave. For now, let’s remove that extra line from our weather data and
reload it, while we investigate this behavior further:</p>
<p>weather-data.csv:</p>
<pre><code>island,temperature,snowfall
torgersen,"1.6",0
biscoe,"1.5",0
dream,"-2.6",1</code></pre>
<p>And back in RStudio:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file<span class="op">=</span><span class="st">"data/weather-data.csv"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="vectors-and-type-coercion">Vectors and Type Coercion<a class="anchor" aria-label="anchor" href="#vectors-and-type-coercion"></a>
</h3>
<p>To better understand this behavior, let’s meet another of the data
structures: the <em>vector</em>.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_vector</span> <span class="op">&lt;-</span> <span class="fu">vector</span><span class="op">(</span>length<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">my_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE FALSE FALSE</code></pre>
</div>
<p>A vector in R is essentially an ordered list of things, with the
special condition that <em>everything in the vector must be the same
basic data type</em>. If you don’t choose the datatype, it’ll default to
<code>logical</code>; or, you can declare an empty vector of whatever
type you like.</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_vector</span> <span class="op">&lt;-</span> <span class="fu">vector</span><span class="op">(</span>mode<span class="op">=</span><span class="st">'character'</span>, length<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">another_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "" "" ""</code></pre>
</div>
<p>You can check if something is a vector:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">another_vector</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:3] "" "" ""</code></pre>
</div>
<p>The somewhat cryptic output from this command indicates the basic
data type found in this vector - in this case <code>chr</code>,
character; an indication of the number of things in the vector -
actually, the indexes of the vector, in this case <code>[1:3]</code>;
and a few examples of what’s actually in the vector - in this case empty
character strings. If we similarly do</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">weather</span><span class="op">$</span><span class="va">temperature</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:3] 1.6 1.5 -2.6</code></pre>
</div>
<p>we see that <code>weather$temperature</code> is a vector, too -
<em>the columns of data we load into R data.frames are all vectors</em>,
and that’s the root of why R forces everything in a column to be the
same basic data type.</p>
<div class="section level4">
<h4 id="coercion-by-combining-vectors">Coercion by combining vectors<a class="anchor" aria-label="anchor" href="#coercion-by-combining-vectors"></a>
</h4>
<p>As we saw in lesson 1, you can also make vectors with explicit
contents with the combine function:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combine_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">6</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">combine_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2 6 3</code></pre>
</div>
<p>Given what we’ve learned so far, what do you think the following will
produce?</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quiz_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>,<span class="fl">6</span>,<span class="st">'3'</span><span class="op">)</span></span>
<span><span class="va">quiz_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "2" "6" "3"</code></pre>
</div>
<p>This is something called <em>type coercion</em>, and it is the source
of many surprises and the reason why we need to be aware of the basic
data types and how R will interpret them. When R encounters a mix of
types (here double and character) to be combined into a single vector,
it will force them all to be the same type. Consider:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coercion_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">coercion_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a"    "TRUE"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_coercion_vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">another_coercion_vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0 1</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="the-type-hierarchy">The type hierarchy<a class="anchor" aria-label="anchor" href="#the-type-hierarchy"></a>
</h4>
<p>The coercion rules go: <code>logical</code> -&gt;
<code>integer</code> -&gt; <code>double</code> (“<code>numeric</code>”)
-&gt; <code>complex</code> -&gt; <code>character</code>, where -&gt; can
be read as <em>are transformed into</em>. For example, combining
<code>logical</code> and <code>character</code> transforms the result to
<code>character</code>:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="st">'a'</span>, <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a"    "TRUE"</code></pre>
</div>
<p>A quick way to recognize <code>character</code> vectors is by the
quotes that enclose them when they are printed.</p>
<p>You can try to force coercion against this flow using the
<code>as.</code> functions:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">character_vector_example</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'0'</span>,<span class="st">'2'</span>,<span class="st">'4'</span><span class="op">)</span></span>
<span><span class="va">character_vector_example</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "0" "2" "4"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">character_coerced_to_double</span> <span class="op">&lt;-</span> <span class="fu">as.double</span><span class="op">(</span><span class="va">character_vector_example</span><span class="op">)</span></span>
<span><span class="va">character_coerced_to_double</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0 2 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">double_coerced_to_logical</span> <span class="op">&lt;-</span> <span class="fu">as.logical</span><span class="op">(</span><span class="va">character_coerced_to_double</span><span class="op">)</span></span>
<span><span class="va">double_coerced_to_logical</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE  TRUE</code></pre>
</div>
<p>As you can see, some surprising things can happen when R forces one
basic data type into another! Nitty-gritty of type coercion aside, the
point is: if your data doesn’t look like what you thought it was going
to look like, type coercion may well be to blame; make sure everything
is the same type in your vectors and your columns of data.frames, or you
will get nasty surprises!</p>
<p>But coercion can also be very useful! For example, in our
<code>weather</code> data <code>snowfall</code> is numeric, but we know
that the 1s and 0s actually represent <code>TRUE</code> and
<code>FALSE</code> (a common way of representing them). We should use
the <code>logical</code> datatype here, which has two states:
<code>TRUE</code> or <code>FALSE</code>, which is exactly what our data
represents. We can ‘coerce’ this column to be <code>logical</code> by
using the <code>as.logical</code> function:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">$</span><span class="va">snowfall</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 0 0 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">$</span><span class="va">snowfall</span> <span class="op">&lt;-</span> <span class="fu">as.logical</span><span class="op">(</span><span class="va">weather</span><span class="op">$</span><span class="va">snowfall</span><span class="op">)</span> <span class="co"># Note this is the first time we have modified our data!</span></span>
<span><span class="va">weather</span><span class="op">$</span><span class="va">snowfall</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE FALSE  TRUE</code></pre>
</div>
<p>Finally, we can ask a few questions about vectors:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sequence_example</span> <span class="op">&lt;-</span> <span class="fl">20</span><span class="op">:</span><span class="fl">25</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">sequence_example</span>, n<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 20 21</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tail</span><span class="op">(</span><span class="va">sequence_example</span>, n<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 22 23 24 25</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">sequence_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">sequence_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "integer"</code></pre>
</div>
</div>
</div>
<div class="section level3">
<h3 id="lists">Lists<a class="anchor" aria-label="anchor" href="#lists"></a>
</h3>
<p>Another data structure you’ll want in your bag of tricks is the
<code>list</code>. A list is simpler in some ways than the other types,
because you can put anything you want in it. Remember <em>everything in
the vector must be of the same basic data type</em>, but a list can have
different data types:</p>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_example</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"a"</span>, <span class="cn">TRUE</span>, <span class="fl">1</span><span class="op">+</span><span class="fl">4i</span><span class="op">)</span></span>
<span><span class="va">list_example</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[[1]]
[1] 1

[[2]]
[1] "a"

[[3]]
[1] TRUE

[[4]]
[1] 1+4i</code></pre>
</div>
<p>When printing the object structure with <code>str()</code>, we see
the data types of all elements:</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">list_example</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>List of 4
 $ : num 1
 $ : chr "a"
 $ : logi TRUE
 $ : cplx 1+4i</code></pre>
</div>
<p>What is the use of lists? They can <strong>organize data of different
types</strong>. For example, you can organize different tables that
belong together, similar to spreadsheets in Excel. But there are many
other uses, too.</p>
<p>We will see another example that will maybe surprise you in the next
chapter.</p>
<p>To retrieve one of the elements of a list, use the <strong>double
bracket</strong>:</p>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_example</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "a"</code></pre>
</div>
<p>The elements of lists also can have <strong>names</strong>, they can
be given by prepending them to the values, separated by an equals
sign:</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_list</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Numbers"</span>, numbers <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, data <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></span>
<span><span class="va">another_list</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$title
[1] "Numbers"

$numbers
 [1]  1  2  3  4  5  6  7  8  9 10

$data
[1] TRUE</code></pre>
</div>
<p>This results in a <strong>named list</strong>. Now we have a new
function of our object! We can access single elements by an additional
way!</p>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_list</span><span class="op">$</span><span class="va">title</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Numbers"</code></pre>
</div>
<div id="names" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="names" class="callout-inner">
<h3 class="callout-title">Names</h3>
<div class="callout-content">
<p>With names, we can give meaning to elements. It is the first time
that we do not only have the <strong>data</strong>, but also explaining
information. It is <em>metadata</em> that can be stuck to the object
like a label. In R, this is called an <strong>attribute</strong>. Some
attributes enable us to do more with our object, for example, like here,
accessing an element by a self-defined name.</p>
<div class="section level3">
<h3 id="accessing-vectors-and-lists-by-name">Accessing vectors and lists by name<a class="anchor" aria-label="anchor" href="#accessing-vectors-and-lists-by-name"></a>
</h3>
<p>We have already seen how to generate a named list. The way to
generate a named vector is very similar. You have seen this function
before:</p>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pizza_price</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span> pizzasubito <span class="op">=</span> <span class="fl">5.64</span>, pizzafresh <span class="op">=</span> <span class="fl">6.60</span>, callapizza <span class="op">=</span> <span class="fl">4.50</span> <span class="op">)</span></span></code></pre>
</div>
<p>The way to retrieve elements is different, though:</p>
<div class="codewrapper sourceCode" id="cb87">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pizza_price</span><span class="op">[</span><span class="st">"pizzasubito"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">pizzasubito</span></span>
<span>       <span class="fl">5.64</span> </span></code></pre>
</div>
<p>The approach used for the list does not work:</p>
<div class="codewrapper sourceCode" id="cb89">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pizza_price</span><span class="op">$</span><span class="va">pizzafresh</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in pizza_price$pizzafresh: $ operator is invalid for atomic vectors</code></pre>
</div>
<p>It will pay off if you remember this error message, you will meet it
in your own analyses. It means that you have just tried accessing an
element like it was in a list, but it is actually in a vector.</p>
</div>
<div class="section level3">
<h3 id="accessing-and-changing-names">Accessing and changing names<a class="anchor" aria-label="anchor" href="#accessing-and-changing-names"></a>
</h3>
<p>If you are only interested in the names, use the <code>names()</code>
function:</p>
<div class="codewrapper sourceCode" id="cb91">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">pizza_price</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "pizzasubito" "pizzafresh"  "callapizza" </code></pre>
</div>
<p>We have seen how to access and change single elements of a vector.
The same is possible for names:</p>
<div class="codewrapper sourceCode" id="cb93">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">pizza_price</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "callapizza"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb95">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">pizza_price</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"call-a-pizza"</span></span>
<span><span class="va">pizza_price</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> pizzasubito   pizzafresh call-a-pizza
        5.64         6.60         4.50 </code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="data-frames">Data frames<a class="anchor" aria-label="anchor" href="#data-frames"></a>
</h2>
<hr class="half-width">
<p>We have data frames at the very beginning of this lesson, they
represent a table of data. We didn’t go much further into detail with
our example cat data frame:</p>
<div class="codewrapper sourceCode" id="cb97">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall
1 torgersen         1.6    FALSE
2    biscoe         1.5    FALSE
3     dream        -2.6     TRUE</code></pre>
</div>
<p>We can now understand something a bit surprising in our data.frame;
what happens if we run:</p>
<div class="codewrapper sourceCode" id="cb99">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "list"</code></pre>
</div>
<p>We see that data.frames look like lists ‘under the hood’. Think again
what we heard about what lists can be used for:</p>
<blockquote>
<p>Lists organize data of different types</p>
</blockquote>
<p>Columns of a data frame are vectors of different types, that are
organized by belonging to the same table.</p>
<p>A data.frame is really a list of vectors. It is a special list in
which all the vectors must have the same length.</p>
<p>How is this “special”-ness written into the object, so that R does
not treat it like any other list, but as a table?</p>
<div class="codewrapper sourceCode" id="cb101">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "data.frame"</code></pre>
</div>
<p>A <strong>class</strong>, just like names, is an attribute attached
to the object. It tells us what this object means for humans.</p>
<p>You might wonder: Why do we need another
what-type-of-object-is-this-function? We already have
<code>typeof()</code>? That function tells us how the object is
<strong>constructed in the computer</strong>. The <code>class</code> is
the <strong>meaning of the object for humans</strong>. Consequently,
what <code>typeof()</code> returns is <em>fixed</em> in R (mainly the
five data types), whereas the output of <code>class()</code> is
<em>diverse</em> and <em>extendable</em> by R packages.</p>
<p>In our <code>weather</code> example, we have an integer, a double and
a logical variable. As we have seen already, each column of data.frame
is a vector.</p>
<div class="codewrapper sourceCode" id="cb103">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">$</span><span class="va">island</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "torgersen" "biscoe"    "dream"    </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb105">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "torgersen" "biscoe"    "dream"    </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb107">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">weather</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb109">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">weather</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:3] "torgersen" "biscoe" "dream"</code></pre>
</div>
<p>Each row is an <em>observation</em> of different variables, itself a
data.frame, and thus can be composed of elements of different types.</p>
<div class="codewrapper sourceCode" id="cb111">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall
1 torgersen         1.6    FALSE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb113">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typeof</span><span class="op">(</span><span class="va">weather</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "list"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb115">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">weather</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	1 obs. of  3 variables:
 $ island     : chr "torgersen"
 $ temperature: num 1.6
 $ snowfall   : logi FALSE</code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1</h3>
<div class="callout-content">
<p>An important part of every data analysis is cleaning the input data.
If you know that the input data is all of the same format,
(e.g. numbers), your analysis is much easier! Clean the weather data set
from the chapter about type coercion.</p>
<div class="section level4">
<h4 id="copy-the-code-template">Copy the code template<a class="anchor" aria-label="anchor" href="#copy-the-code-template"></a>
</h4>
<p>Create a new script in RStudio and copy and paste the following code.
Then move on to the tasks below, which help you to fill in the gaps
(______).</p>
<pre><code># Read data
weather &lt;- read.csv("data/weather-data_v2.csv")

# 1. Print the data
_____

# 2. Show an overview of the table with all data types
_____(weather)

# 3. The "temperature" column has the incorrect data type __________.
#    The correct data type is: ____________.

# 4. Correct the 4th temperature data point with the mean of the two given values
weather$temp[4] &lt;- -3.45
#    print the data again to see the effect
weather

# 5. Convert the temperature to the right data type
weather$temp &lt;- ______________(weather$temp)

#    Calculate the mean to test yourself
mean(weather$temp)

# If you see the correct mean value (and not NA), you did the exercise
# correctly!</code></pre>
</div>
<div class="section level3">
<h3 id="instructions-for-the-tasks">Instructions for the tasks<a class="anchor" aria-label="anchor" href="#instructions-for-the-tasks"></a>
</h3>
<div class="section level4">
<h4 id="print-the-data">1. Print the data<a class="anchor" aria-label="anchor" href="#print-the-data"></a>
</h4>
<p>Execute the first statement (<code>read.csv(...)</code>). Then print
the data to the console</p>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Tip 1.1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Show the content of any variable by typing its name.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to Challenge 1.1
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Two correct solutions:</p>
<pre><code><span><span class="va">weather</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="overview-of-the-data-types" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="overview-of-the-data-types" class="callout-inner">
<h3 class="callout-title">2. Overview of the data types</h3>
<div class="callout-content">
<p>The data type of your data is as important as the data itself. Use a
function we saw earlier to print out the data types of all columns of
the <code>weather</code> table.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Tip 1.2
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>In the chapter “Data types” we saw two functions that can show data
types. One printed just a single word, the data type name. The other
printed a short form of the data type, and the first few values. We need
the second here.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solution to Challenge 1.2
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<pre><code><span> <span class="fu">str</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="which-data-type-do-we-need" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="which-data-type-do-we-need" class="callout-inner">
<h3 class="callout-title">3. Which data type do we need?</h3>
<div class="callout-content">
<p>The shown data type is not the right one for this data (temperature
at a location). Which data type do we need?</p>
<ul>
<li>Why did the <code>read.csv()</code> function not choose the correct
data type?</li>
<li>Fill in the gap in the comment with the correct data type for
temperature!</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Tip 1.3
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Scroll up to the section about the <a href="#the-type-hierarchy">type
hierarchy</a> to review the available data types</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Solution to Challenge 1.3
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<ul>
<li>temperature is expressed on a continuous scale (real numbers). The R
data type for this is “double” (also known as “numeric”).</li>
<li>The fourth row has the value “-3.4 or -3.5”. That is not a number
but two numbers, and an english word. Therefore, the “character” data
type is chosen. The whole column is now text, because all values in the
same columns have to be the same data type.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="correct-the-problematic-value" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="correct-the-problematic-value" class="callout-inner">
<h3 class="callout-title">4. Correct the problematic value</h3>
<div class="callout-content">
<p>The code to assign a new temperature value to the problematic fourth
row is given. Think first and then execute it: What will be the data
type after assigning a number like in this example? You can check the
data type after executing to see if you were right.</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Tip 1.4
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p>Revisit the hierarchy of data types when two different data types are
combined.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Solution to challenge 1.4
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<p>The data type of the column “temperature” is “character”. The
assigned data type is “double”. Combining two data types yields the data
type that is higher in the following hierarchy:</p>
<pre><code> logical &lt; integer &lt; double &lt; complex &lt; character</code></pre>
<p>Therefore, the column is still of type character! We need to manually
convert it to “double”.</p>
</div>
</div>
</div>
</div>
<div id="convert-the-column-temperature-to-the-correct-data-type" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="convert-the-column-temperature-to-the-correct-data-type" class="callout-inner">
<h3 class="callout-title">5. Convert the column “temperature” to the correct data type</h3>
<div class="callout-content">
<p>Temperature readings are numbers. But the column does not have this
data type yet. Coerce the column to floating point numbers.</p>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9">
  Tip 1.5
  </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" aria-labelledby="headingSolution9" data-bs-parent="#accordionSolution9">
<div class="accordion-body">
<p>The functions to convert data types start with <code>as.</code>. You
can look for the function further up in the manuscript or use the
RStudio auto-complete function: Type “<code>as.</code>” and then press
the TAB key.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10">
  Solution to Challenge 1.5
  </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" aria-labelledby="headingSolution10" data-bs-parent="#accordionSolution10">
<div class="accordion-body">
<p>There are two functions that are synonymous for historic reasons:</p>
<pre><code><span><span class="va">weather</span><span class="op">$</span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu">as.double</span><span class="op">(</span><span class="va">weather</span><span class="op">$</span><span class="va">temp</span><span class="op">)</span></span>
<span><span class="va">weather</span><span class="op">$</span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu">as.numeric</span><span class="op">(</span><span class="va">weather</span><span class="op">$</span><span class="va">temp</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2</h3>
<div class="callout-content">
<p>There are several subtly different ways to call variables,
observations and elements from data.frames:</p>
<ul>
<li><code>weather[1]</code></li>
<li><code>weather[[1]]</code></li>
<li><code>weather$island</code></li>
<li><code>weather["island"]</code></li>
<li><code>weather[1, 1]</code></li>
<li><code>weather[, 1]</code></li>
<li><code>weather[1, ]</code></li>
</ul>
<p>Try out these examples and explain what is returned by each one.</p>
<p><em>Hint:</em> Use the function <code>typeof()</code> to examine what
is returned in each case.</p>
</div>
</div>
</div>
<div id="accordionSolution11" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution11" aria-expanded="false" aria-controls="collapseSolution11">
  <h4 class="accordion-header" id="headingSolution11">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution11" class="accordion-collapse collapse" aria-labelledby="headingSolution11" data-bs-parent="#accordionSolution11">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb122">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island
1 torgersen
2    biscoe
3     dream</code></pre>
</div>
<p>We can think of a data frame as a list of vectors. The single brace
<code>[1]</code> returns the first slice of the list, as another list.
In this case it is the first column of the data frame.</p>
<div class="codewrapper sourceCode" id="cb124">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "torgersen" "biscoe"    "dream"    </code></pre>
</div>
<p>The double brace <code>[[1]]</code> returns the contents of the list
item. In this case it is the contents of the first column, a
<em>vector</em> of type <em>character</em>.</p>
<div class="codewrapper sourceCode" id="cb126">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">$</span><span class="va">island</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "torgersen" "biscoe"    "dream"    </code></pre>
</div>
<p>This example uses the <code>$</code> character to address items by
name. <em>island</em> is the first column of the data frame, again a
<em>vector</em> of type <em>character</em>.</p>
<div class="codewrapper sourceCode" id="cb128">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span><span class="st">"island"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island
1 torgersen
2    biscoe
3     dream</code></pre>
</div>
<p>Here we are using a single brace <code>["island"]</code> replacing
the index number with the column name. Like example 1, the returned
object is a <em>list</em>.</p>
<div class="codewrapper sourceCode" id="cb130">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "torgersen"</code></pre>
</div>
<p>This example uses a single brace, but this time we provide row and
column coordinates. The returned object is the value in row 1, column 1.
The object is a <em>vector</em> of type <em>character</em>.</p>
<div class="codewrapper sourceCode" id="cb132">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "torgersen" "biscoe"    "dream"    </code></pre>
</div>
<p>Like the previous example we use single braces and provide row and
column coordinates. The row coordinate is not specified, R interprets
this missing value as all the elements in this <em>column</em> and
returns them as a <em>vector</em>.</p>
<div class="codewrapper sourceCode" id="cb134">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall
1 torgersen         1.6    FALSE</code></pre>
</div>
<p>Again we use the single brace with row and column coordinates. The
column coordinate is not specified. The return value is a <em>list</em>
containing all the values in the first row.</p>
</div>
</div>
</div>
</div>
<div id="tip-renaming-data-frame-columns" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-renaming-data-frame-columns" class="callout-inner">
<h3 class="callout-title">Tip: Renaming data frame columns</h3>
<div class="callout-content">
<p>Data frames have column names, which can be accessed with the
<code>names()</code> function.</p>
<div class="codewrapper sourceCode" id="cb136">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "island"      "temperature" "snowfall"   </code></pre>
</div>
<p>If you want to rename the second column of <code>weather</code>, you
can assign a new name to the second element of
<code>names(weather)</code>.</p>
<div class="codewrapper sourceCode" id="cb138">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">names</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"temperature_celcius"</span></span>
<span><span class="va">weather</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature_celcius snowfall
1 torgersen                 1.6    FALSE
2    biscoe                 1.5    FALSE
3     dream                -2.6     TRUE</code></pre>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>read.csv</code> to read tabular data in R.</li>
<li>The basic data types in R are double, integer, complex, logical, and
character.</li>
<li>Data structures such as data frames are built on top of lists and
vectors, with some added attributes.</li>
<li>Indexing in R starts at 1, not 0.</li>
<li>Access individual values by location using <code>[]</code>.</li>
<li>Access slices of data using <code>[low:high]</code>.</li>
<li>Access arbitrary sets of data using <code>[c(...)]</code>.</li>
<li>Use logical operations and logical vectors to access subsets of
data.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-exploring-dataframes"><p>Content from <a href="03-exploring-dataframes.html">Exploring Data Frames</a></p>
<hr>
<p>Last updated on 2024-11-25 |

        <a href="https://github.com/kkh451/r_intro/edit/main/episodes/03-exploring-dataframes.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I manipulate a data frame?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Add and remove rows or columns.</li>
<li>Append two data frames.</li>
<li>Display basic properties of data frames including size and class of
the columns, names, and first few rows.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>At this point, you’ve seen it all: in the last lesson, we toured all
the basic data types and data structures in R. Everything you do will be
a manipulation of those tools. But most of the time, the star of the
show is the data frame—the table that we created by loading information
from a csv file. In this lesson, we’ll learn a few more things about
working with data frames.</p>
<section><h2 class="section-heading" id="understanding-our-data-frame">Understanding our Data frame<a class="anchor" aria-label="anchor" href="#understanding-our-data-frame"></a>
</h2>
<hr class="half-width">
<p>Let’s ask some questions about this data frame to understand more
about its structure:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>'data.frame':	3 obs. of  3 variables:
 $ island     : chr  "torgersen" "biscoe" "dream"
 $ temperature: num  1.6 1.5 -2.6
 $ snowfall   : int  0 0 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    island           temperature         snowfall
 Length:3           Min.   :-2.6000   Min.   :0.0000
 Class :character   1st Qu.:-0.5500   1st Qu.:0.0000
 Mode  :character   Median : 1.5000   Median :0.0000
                    Mean   : 0.1667   Mean   :0.3333
                    3rd Qu.: 1.5500   3rd Qu.:0.5000
                    Max.   : 1.6000   Max.   :1.0000  </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ncol</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">colnames</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "island"      "temperature" "snowfall"   </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall
1 torgersen         1.6        0
2    biscoe         1.5        0
3     dream        -2.6        1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">typof</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in typof(weather): could not find function "typof"</code></pre>
</div>
</section><section><h2 class="section-heading" id="adding-columns-and-rows-in-data-frames">Adding columns and rows in data frames<a class="anchor" aria-label="anchor" href="#adding-columns-and-rows-in-data-frames"></a>
</h2>
<hr class="half-width">
<p>We already learned that the columns of a data frame are vectors, so
that our data are consistent in type throughout the columns. As such, if
we want to add a new column, we can start by making a new vector:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sunshine hours</span></span>
<span><span class="va">sun</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="va">weather</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall
1 torgersen         1.6        0
2    biscoe         1.5        0
3     dream        -2.6        1</code></pre>
</div>
<p>We can then add this as a column via:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cbind</span><span class="op">(</span><span class="va">weather</span>, <span class="va">sun</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall sun
1 torgersen         1.6        0  10
2    biscoe         1.5        0  11
3     dream        -2.6        1  12</code></pre>
</div>
<p>Note that if we tried to add a vector of sunshine hours with a
different number of entries than the number of rows in the data frame,
it would fail:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sun</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span>, <span class="fl">13</span><span class="op">)</span></span>
<span><span class="fu">cbind</span><span class="op">(</span><span class="va">weather</span>, <span class="va">sun</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data.frame(..., check.names = FALSE): arguments imply differing number of rows: 3, 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sun</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span><span class="op">)</span></span>
<span><span class="fu">cbind</span><span class="op">(</span><span class="va">weather</span>, <span class="va">sun</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in data.frame(..., check.names = FALSE): arguments imply differing number of rows: 3, 2</code></pre>
</div>
<p>Why didn’t this work? Of course, R wants to see one element in our
new column for every row in the table:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">sun</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<p>So for it to work we need to have <code>nrow(weather)</code> =
<code>length(sun)</code>. Let’s overwrite the content of weather with
our new data frame.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sun</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">weather</span>, <span class="va">sun</span><span class="op">)</span></span></code></pre>
</div>
<p>Now how about adding rows? We already know that the rows of a data
frame are lists:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_row</span> <span class="op">&lt;-</span> <span class="fu">list</span><span class="op">(</span><span class="st">"deception"</span>, <span class="op">-</span><span class="fl">3.45</span>, <span class="cn">TRUE</span>, <span class="fl">13</span><span class="op">)</span></span>
<span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">weather</span>, <span class="va">new_row</span><span class="op">)</span></span></code></pre>
</div>
<p>Let’s confirm that our new row was added correctly.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall sun
1 torgersen        1.60        0  10
2    biscoe        1.50        0  11
3     dream       -2.60        1  12
4 deception       -3.45        1  13</code></pre>
</div>
</section><section><h2 class="section-heading" id="removing-rows">Removing rows<a class="anchor" aria-label="anchor" href="#removing-rows"></a>
</h2>
<hr class="half-width">
<p>We now know how to add rows and columns to our data frame in R. Now
let’s learn to remove rows.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall sun
1 torgersen        1.60        0  10
2    biscoe        1.50        0  11
3     dream       -2.60        1  12
4 deception       -3.45        1  13</code></pre>
</div>
<p>We can ask for a data frame minus the last row:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span><span class="op">-</span><span class="fl">4</span>, <span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall sun
1 torgersen         1.6        0  10
2    biscoe         1.5        0  11
3     dream        -2.6        1  12</code></pre>
</div>
<p>Notice the comma with nothing after it to indicate that we want to
drop the entire fourth row.</p>
<p>Note: we could also remove several rows at once by putting the row
numbers inside of a vector, for example:
<code>weather[c(-3,-4), ]</code></p>
</section><section><h2 class="section-heading" id="removing-columns">Removing columns<a class="anchor" aria-label="anchor" href="#removing-columns"></a>
</h2>
<hr class="half-width">
<p>We can also remove columns in our data frame. What if we want to
remove the column “sun”. We can remove it in two ways, by variable
number or by index.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span><span class="op">[</span>,<span class="op">-</span><span class="fl">4</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall
1 torgersen        1.60        0
2    biscoe        1.50        0
3     dream       -2.60        1
4 deception       -3.45        1</code></pre>
</div>
<p>Notice the comma with nothing before it, indicating we want to keep
all of the rows.</p>
<p>Alternatively, we can drop the column by using the index name and the
<code>%in%</code> operator. The <code>%in%</code> operator goes through
each element of its left argument, in this case the names of
<code>weather</code>, and asks, “Does this element occur in the second
argument?”</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">drop</span> <span class="op">&lt;-</span> <span class="fu">names</span><span class="op">(</span><span class="va">weather</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"sun"</span><span class="op">)</span></span>
<span><span class="va">weather</span><span class="op">[</span>,<span class="op">!</span><span class="va">drop</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall
1 torgersen        1.60        0
2    biscoe        1.50        0
3     dream       -2.60        1
4 deception       -3.45        1</code></pre>
</div>
</section><section><h2 class="section-heading" id="appending-to-a-data-frame">Appending to a data frame<a class="anchor" aria-label="anchor" href="#appending-to-a-data-frame"></a>
</h2>
<hr class="half-width">
<p>The key to remember when adding data to a data frame is that
<em>columns are vectors and rows are lists.</em> We can also glue two
data frames together with <code>rbind</code>:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">weather</span>, <span class="va">weather</span><span class="op">)</span></span>
<span><span class="va">weather</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>     island temperature snowfall sun
1 torgersen        1.60        0  10
2    biscoe        1.50        0  11
3     dream       -2.60        1  12
4 deception       -3.45        1  13
5 torgersen        1.60        0  10
6    biscoe        1.50        0  11
7     dream       -2.60        1  12
8 deception       -3.45        1  13</code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1</h3>
<div class="callout-content">
<p>You can create a new data frame right from within R with the
following syntax:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>id <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>,</span>
<span>                 x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>                 y <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Make a data frame that holds the following information for
yourself:</p>
<ul>
<li>first name</li>
<li>last name</li>
<li>lucky number</li>
</ul>
<p>Then use <code>rbind</code> to add an entry for the people sitting
beside you. Finally, use <code>cbind</code> to add a column with each
person’s answer to the question, “Is it time for coffee break?”</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>first <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Grace"</span><span class="op">)</span>,</span>
<span>                 last <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Hopper"</span><span class="op">)</span>,</span>
<span>                 lucky_number <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">rbind</span><span class="op">(</span><span class="va">df</span>, <span class="fu">list</span><span class="op">(</span><span class="st">"Marie"</span>, <span class="st">"Curie"</span>, <span class="fl">238</span><span class="op">)</span> <span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">df</span>, coffeetime <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>cbind()</code> to add a new column to a data frame.</li>
<li>Use <code>rbind()</code> to add a new row to a data frame.</li>
<li>Use <code>str()</code>, <code>summary()</code>,
nrow()<code>,</code>ncol()<code>,</code>dim()<code>,</code>colnames()<code>,</code>head()<code>, and</code>typeof()`
to understand the structure of a data frame.</li>
<li>Read in a csv file using <code>read.csv()</code>.</li>
<li>Understand what <code>length()</code> of a data frame
represents.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-seeking-help"><p>Content from <a href="04-seeking-help.html">R Packages and Seeking Help</a></p>
<hr>
<p>Last updated on 2024-11-25 |

        <a href="https://github.com/kkh451/r_intro/edit/main/episodes/04-seeking-help.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I use packages in R?</li>
<li>How can I get help in R?</li>
<li>How can I manage my environment?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to install packages, and load them into your R
session</li>
<li>To be able to use CRAN task views to identify packages to solve a
problem</li>
<li>To be able to read R help files for functions and special
operators</li>
<li>To be able to seek help from your peers</li>
<li>To be able to manage a workspace in an interactive R session</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="r-packages">R packages<a class="anchor" aria-label="anchor" href="#r-packages"></a>
</h2>
<hr class="half-width">
<p>R packages extend the functionality of R. Over 13,000 packages have
been written by others. It’s also possible to write your own packages;
this can be a great way of disseminating your research and making it
useful to others. A number of useful packages are installed by default
with R (are part of the R core distribution). The teaching machines at
the University have a number of additional packages installed by
default.</p>
<p>We can see the packages installed on an R installation via the
“packages” tab in RStudio, or by typing
<code>installed.packages()</code> at the prompt, or by selecting the
“Packages” tab in RStudio.</p>
<p>In this course we will be using packages in the <a href="https://www.tidyverse.org" class="external-link">tidyverse</a> to perform the bulk of
our plotting and data analysis. Although we could do most of the tasks
without using extra packages, the tidyverse makes it quicker and easier
to perform common data analysis tasks. The tidyverse packages are
already installed on the university teaching machines.</p>
</section><section><h2 class="section-heading" id="finding-and-installing-new-packages">Finding and installing new packages<a class="anchor" aria-label="anchor" href="#finding-and-installing-new-packages"></a>
</h2>
<hr class="half-width">
<p>There are several sources of packages in R; the ones you are most
likely to encounter are:</p>
<div class="section level3">
<h3 id="cran">CRAN<a class="anchor" aria-label="anchor" href="#cran"></a>
</h3>
<p><a href="https://cran.r-project.org" class="external-link">CRAN</a> is the main repository
of packages for R. All the packages have undergone basic quality
assurance when they were submitted. There are over 12,000 packages in
the archive; there is a lot of overlap between some packages. Working
out <em>what</em> the most appropriate package to use isn’t always
straightforward.</p>
</div>
<div class="section level3">
<h3 id="bioconductor">Bioconductor<a class="anchor" aria-label="anchor" href="#bioconductor"></a>
</h3>
<p><a href="https://www.bioconductor.org/" class="external-link">Bioconductor</a> is a more
specialised repository, which contains packages for bioinformatics.
Common workflows are provided, and the packages are more thoroughly
quality assured. Because of its more specialised nature we don’t focus
on Bioconductor in this course.</p>
</div>
<div class="section level3">
<h3 id="github-personal-websites">Github / personal websites<a class="anchor" aria-label="anchor" href="#github-personal-websites"></a>
</h3>
<p>Some authors distribute packages via <a href="https://www.github.com" class="external-link">Github</a> or their own personal
web-pages. These packages may not have undergone any form of quality
assurance. Note that many packages have their own website, but the
package itself is distributed via CRAN.</p>
</div>
<div class="section level3">
<h3 id="finding-packages-to-help-with-your-research">Finding packages to help with your research<a class="anchor" aria-label="anchor" href="#finding-packages-to-help-with-your-research"></a>
</h3>
<p>There are various ways of finding packages that might be useful in
your research:</p>
<ul>
<li><p>The <a href="https://cran.r-project.org/web/views/" class="external-link">CRAN task
view</a> provides an overview of the packages available for various
research fields and methodologies.</p></li>
<li><p><a href="https://ropensci.org/" class="external-link">rOpenSci</a> provides packages
for performing open and reproducible science. Most of these are
available from CRAN or Bioconductor.</p></li>
<li><p>Journal articles should cite the R packages they used in their
analysis.</p></li>
<li><p><a href="https://www.jstatsoft.org/index" class="external-link">The Journal of
Statistical Software</a> contains peer-reviewed articles for R packages
(and other statistical software).</p></li>
<li><p><a href="https://journal.r-project.org/" class="external-link">The R Journal</a>
contains articles about new packages in R.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="installing-packages">Installing packages<a class="anchor" aria-label="anchor" href="#installing-packages"></a>
</h3>
<p>If a package is available on <a href="https://cran.r-project.org" class="external-link">CRAN</a>, you can install it by
typing:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"packagename"</span><span class="op">)</span></span></code></pre>
</div>
<p>This will automatically install any packages that the package you are
installing depends on.</p>
<p>Installing a package doesn’t make the functions included in it
available to you; to do this you must use the <code>library()</code>
function. As we will be using the tidyverse later in the course, let’s
load that now:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<p>The tidyverse is a collection of other packages that work well
together. The <code>tidyverse</code> package’s main function is to load
some of these other packages. We will be using some of these later in
the course.</p>
<div id="conflicting-names" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="conflicting-names" class="callout-inner">
<h3 class="callout-title">Conflicting names</h3>
<div class="callout-content">
<p>You may get a warning message when loading a package that a function
is “masked”. This happens when a function name has already been
“claimed” by a package that’s already loaded. The most recently loaded
function wins.</p>
<p>If you want to use the function from the other package, use
<code>packagename::function()</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="reading-help-files">Reading Help files<a class="anchor" aria-label="anchor" href="#reading-help-files"></a>
</h2>
<hr class="half-width">
<p>R, and every package, provide help files for functions. The general
syntax to search for help on any function, say
<code>function_name</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">function_name</span></span>
<span><span class="co"># OR</span></span>
<span><span class="fu">help</span><span class="op">(</span><span class="va">function_name</span><span class="op">)</span></span></code></pre>
</div>
<p>This will load up a help page in RStudio (or by launching a web
browser, or as plain text if you are using R without RStudio).</p>
<p>Each help page is broken down into sections:</p>
<ul>
<li>Description: An extended description of what the function does.</li>
<li>Usage: The arguments of the function and their default values.</li>
<li>Arguments: An explanation of the data each argument is
expecting.</li>
<li>Details: Any important details to be aware of.</li>
<li>Value: The data the function returns.</li>
<li>See Also: Any related functions you might find useful.</li>
<li>Examples: Some examples for how to use the function.</li>
</ul>
<p>Different functions might have different sections, but these are the
main ones you should be aware of.</p>
<div id="tip-reading-help-files" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-reading-help-files" class="callout-inner">
<h3 class="callout-title">Tip: Reading help files</h3>
<div class="callout-content">
<p>One of the most daunting aspects of R is the large number of
functions available. It would be prohibitive, if not impossible to
remember the correct usage for every function you use. Luckily, the help
files mean you don’t have to!</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="special-operators">Special Operators<a class="anchor" aria-label="anchor" href="#special-operators"></a>
</h2>
<hr class="half-width">
<p>To seek help on special operators, use quotes:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="st">"&lt;-"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="getting-help-on-packages">Getting help on packages<a class="anchor" aria-label="anchor" href="#getting-help-on-packages"></a>
</h2>
<hr class="half-width">
<p>Many packages come with “vignettes”: tutorials and extended example
documentation. Without any arguments, <code>vignette()</code> will list
all vignettes for all installed packages;
<code>vignette(package="package-name")</code> will list all available
vignettes for <code>package-name</code>, and
<code>vignette("vignette-name")</code> will open the specified
vignette.</p>
<p>If a package doesn’t have any vignettes, you can usually find help by
typing <code>help("package-name")</code>, or
<code>package?package-name</code>.</p>
</section><section><h2 class="section-heading" id="when-you-kind-of-remember-the-function">When you kind of remember the function<a class="anchor" aria-label="anchor" href="#when-you-kind-of-remember-the-function"></a>
</h2>
<hr class="half-width">
<p>If you’re not sure what package a function is in, or how it’s
specifically spelled you can do a fuzzy search:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="op">?</span><span class="va">function_name</span></span></code></pre>
</div>
<div id="citing-r-and-r-packages" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="citing-r-and-r-packages" class="callout-inner">
<h3 class="callout-title">Citing R and R packages</h3>
<div class="callout-content">
<p>If you use R in your work you should cite it, and the packages you
use. The <code>citation()</code> command will return the appropriate
citation for R itself.<br><code>citation(packagename)</code> will provide the citation for
<code>packagename</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="when-your-code-doesnt-work-seeking-help-from-your-peers">When your code doesn’t work: seeking help from your peers<a class="anchor" aria-label="anchor" href="#when-your-code-doesnt-work-seeking-help-from-your-peers"></a>
</h2>
<hr class="half-width">
<p>If you’re having trouble using a function, 9 times out of 10, the
answers you are seeking have already been answered on <a href="https://stackoverflow.com/" class="external-link">Stack Overflow</a>. You can search
using the <code>[r]</code> tag.</p>
<p>If you can’t find the answer, there are a few useful functions to
help you ask a question from your peers:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">dput</span></span></code></pre>
</div>
<p>Will dump the data you’re working with into a format so that it can
be copy and pasted by anyone else into their R session.</p>
</section><section><h2 class="section-heading" id="package-versions">Package versions<a class="anchor" aria-label="anchor" href="#package-versions"></a>
</h2>
<hr class="half-width">
<p>Many of the packages in R are frequently updated. This does mean that
code written for one version of a package may not work with another
version of the package (or, potentially even worse, run but give a
<em>different</em> result). The <code>sessionInfo()</code> command
prints information about the system, and the names and versions of
packages that have been loaded. You should include the output of
<code>sessionInfo()</code> somewhere in your research. The <a href="https://rstudio.github.io/packrat/" class="external-link">packrat package</a> provides a
way of keeping specific versions of packages associated with each of
your projects.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessionInfo</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1</h3>
<div class="callout-content">
<p>Use help to find a function (and its associated parameters) that you
could use to load data from a tabular file in which columns are
delimited with “\t” (tab) and the decimal point is a “.” (period). This
check for decimal separator is important, especially if you are working
with international colleagues, because different countries have
different conventions for the decimal point (i.e. comma vs period).
Hint: use <code>??"read table"</code> to look up functions related to
reading in tabular data.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The standard R function for reading tab-delimited files with a period
decimal separator is read.delim(). You can also do this with
<code>read.table(file, sep="\t")</code> (the period is the
<em>default</em> decimal separator for <code>read.table()</code>),
although you may have to change the <code>comment.char</code> argument
as well if your data file contains hash (#) characters.</p>
</div>
</div>
</div>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2</h3>
<div class="callout-content">
<p>Vignettes are often useful tutorials. We will be using the
<code>dplyr</code> package to manipulate tables of data. List the
vignettes available in the package. You might want to take a look at
these now, or later when we cover <code>dplyr</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">vignette</span><span class="op">(</span>package<span class="op">=</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre>
</div>
<p>Shows that there are several vignettes included in the package. The
<code>dplyr</code> vignette looks like it might be useful later. We can
view this with:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">vignette</span><span class="op">(</span>package<span class="op">=</span><span class="st">"dplyr"</span>, <span class="st">"dplyr"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="managing-your-environment">Managing your environment<a class="anchor" aria-label="anchor" href="#managing-your-environment"></a>
</h2>
<hr class="half-width">
<p>There are a few useful commands you can use to interact with the R
session. Let’s create tow varables <code>x</code> and <code>y</code> to
demonstrate this.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="st">"birds"</span></span></code></pre>
</div>
<p><code>ls</code> will list all of the variables and functions stored
in the global environment (your working R session):</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ls</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "x" "y"</code></pre>
</div>
<div id="tip-hidden-objects" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-hidden-objects" class="callout-inner">
<h3 class="callout-title">Tip: hidden objects</h3>
<div class="callout-content">
<p>Like in the shell, <code>ls</code> will hide any variables or
functions starting with a “.” by default. To list all objects, type
<code>ls(all.names=TRUE)</code> instead</p>
</div>
</div>
</div>
<p>Note here that we didn’t give any arguments to <code>ls</code>, but
we still needed to give the parentheses to tell R to call the
function.</p>
<p>If we type <code>ls</code> by itself, R prints a bunch of code
instead of a listing of objects.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ls</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>function (name, pos = -1L, envir = as.environment(pos), all.names = FALSE,
    pattern, sorted = TRUE)
{
    if (!missing(name)) {
        pos &lt;- tryCatch(name, error = function(e) e)
        if (inherits(pos, "error")) {
            name &lt;- substitute(name)
            if (!is.character(name))
                name &lt;- deparse(name)
            warning(gettextf("%s converted to character string",
                sQuote(name)), domain = NA)
            pos &lt;- name
        }
    }
    all.names &lt;- .Internal(ls(envir, all.names, sorted))
    if (!missing(pattern)) {
        if ((ll &lt;- length(grep("[", pattern, fixed = TRUE))) &amp;&amp;
            ll != length(grep("]", pattern, fixed = TRUE))) {
            if (pattern == "[") {
                pattern &lt;- "\\["
                warning("replaced regular expression pattern '[' by  '\\\\['")
            }
            else if (length(grep("[^\\\\]\\[&lt;-", pattern))) {
                pattern &lt;- sub("\\[&lt;-", "\\\\\\[&lt;-", pattern)
                warning("replaced '[&lt;-' by '\\\\[&lt;-' in regular expression pattern")
            }
        }
        grep(pattern, all.names, value = TRUE)
    }
    else all.names
}
&lt;bytecode: 0x562b82cf6d60&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
<p>What’s going on here?</p>
<p>Like everything in R, <code>ls</code> is the name of an object, and
entering the name of an object by itself prints the contents of the
object. The object <code>x</code> that we created earlier contains
5:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<p>The object <code>ls</code> contains the R code that makes the
<code>ls</code> function work! We’ll talk more about how functions work
and start writing our own later.</p>
<p>You can use <code>rm</code> to delete objects you no longer need:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<p>If you have lots of things in your environment and want to delete all
of them, you can pass the results of <code>ls</code> to the
<code>rm</code> function:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span>list <span class="op">=</span> <span class="fu">ls</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>In this case we’ve combined the two. Like the order of operations,
anything inside the innermost parentheses is evaluated first, and so
on.</p>
<p>In this case we’ve specified that the results of <code>ls</code>
should be used for the <code>list</code> argument in <code>rm</code>.
When assigning values to arguments by name, you <em>must</em> use the
<code>=</code> operator!!</p>
<p>If instead we use <code>&lt;-</code>, there will be unintended side
effects, or you may get an error message:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rm</span><span class="op">(</span><span class="va">list</span> <span class="op">&lt;-</span> <span class="fu">ls</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in rm(list &lt;- ls()): ... must contain names or character strings</code></pre>
</div>
<div id="tip-warnings-vs.-errors" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-warnings-vs.-errors" class="callout-inner">
<h3 class="callout-title">Tip: Warnings vs. Errors</h3>
<div class="callout-content">
<p>Pay attention when R does something unexpected! Errors, like above,
are thrown when R cannot proceed with a calculation. Warnings on the
other hand usually mean that the function has run, but it probably
hasn’t worked as expected.</p>
<p>In both cases, the message that R prints out usually give you clues
how to fix a problem.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode: - <a href="https://www.statmethods.net/" class="external-link">Quick R</a> - <a href="https://www.rstudio.com/resources/cheatsheets/" class="external-link">RStudio cheat
sheets</a> - <a href="https://www.cookbook-r.com/" class="external-link">Cookbook for
R</a></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use install.packages() to install packages (libraries) from
CRAN</li>
<li>Use <code>help()</code> to get online help in R</li>
<li>Use ls() to list the variables in a program</li>
<li>Use rm() to delete objects in a program</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-05-dplyr"><p>Content from <a href="05-dplyr.html">Manipulating Tibbles With Dplyr</a></p>
<hr>
<p>Last updated on 2024-11-25 |

        <a href="https://github.com/kkh451/r_intro/edit/main/episodes/05-dplyr.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I manipulate data frames without repeating myself?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to use the six main data frame manipulation ‘verbs’ with
pipes in <code>dplyr</code>.</li>
<li>To understand how <code>group_by()</code> and
<code>summarize()</code> can be combined to summarize datasets.</li>
<li>Be able to analyze a subset of data using logical filtering.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode we’ll start to work with the penguins data directly.
This is a version of the Palmer Penguins dataset that has been adapted
for teaching. All missing values have been replaced with the sample mean
/ mode for convenience. The columns bill_length_mm and bill_depth_mm are
defined as illustrated below.</p>
<figure><img src="fig/culmen_depth_ccby4_at_allison_horst.png" alt="Cartoon illustration of bill length and depth by @Allison Horst (CC-BY-4.0);" class="figure mx-auto d-block"><div class="figcaption">An illustration of Bill Length and Depth <a href="https://twitter.com/allison_horst" class="external-link">Artwork by <span class="citation">@allison_horst</span></a>
</div>
</figure><p>Manipulation of data frames means many things to many researchers: we
often select certain observations (rows) or variables (columns), we
often group the data by a certain variable(s), or we even calculate
summary statistics. We can do these operations using the normal base R
operations:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span><span class="op">[</span><span class="va">penguins</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Adelie"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'penguins' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span><span class="op">[</span><span class="va">penguins</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Chinstrap"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'penguins' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">penguins</span><span class="op">$</span><span class="va">body_mass_g</span><span class="op">[</span><span class="va">penguins</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Gentoo"</span><span class="op">]</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'penguins' not found</code></pre>
</div>
<p>But this isn’t very <em>nice</em> because there is a fair bit of
repetition. Repeating yourself will cost you time, both now and later,
and potentially introduce some nasty bugs.</p>
<section><h2 class="section-heading" id="the-dplyr-package">The <code>dplyr</code> package<a class="anchor" aria-label="anchor" href="#the-dplyr-package"></a>
</h2>
<hr class="half-width">
<p>Luckily, the <a href="https://cran.r-project.org/package=dplyr" class="external-link"><code>dplyr</code></a>
package provides a number of very useful functions for manipulating data
frames in a way that will reduce the above repetition, reduce the
probability of making errors, and probably even save you some typing. As
an added bonus, you might even find the <code>dplyr</code> grammar
easier to read.</p>
<div id="tip-tidyverse" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-tidyverse" class="callout-inner">
<h3 class="callout-title">Tip: Tidyverse</h3>
<div class="callout-content">
<p><code>dplyr</code> package belongs to a broader family of opinionated
R packages designed for data science called the “Tidyverse”. These
packages are specifically designed to work harmoniously together. Some
of these packages will be covered along this course, but you can find
more complete information here: <a href="https://www.tidyverse.org/" class="external-link">https://www.tidyverse.org/</a>.</p>
</div>
</div>
</div>
<p>If you have have not installed the tidyverse package earlier, please
do so:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">'tidyverse'</span><span class="op">)</span></span></code></pre>
</div>
<p>Now let’s load the package:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span></code></pre>
</div>
<p>Here we’re going to cover 5 of the most commonly used
<code>dplyr</code> functions as well as using pipes (<code>|&gt;</code>)
to combine them.</p>
<ol style="list-style-type: decimal">
<li><code>select()</code></li>
<li><code>filter()</code></li>
<li><code>group_by()</code></li>
<li><code>summarize()</code></li>
<li><code>mutate()</code></li>
</ol>
<p>But first we need to highlight some key differences between how base
R and the tidyverse handle tabular data.</p>
<p>Let’s make a new script for this episode, by choosing the menu
options <em>File</em>, <em>New File</em>, <em>R Script</em>.</p>
<p>One key thing to note is that the tidyverse duplicates many base R
functions e.g.<br>
we can load our dataset using the tidyverse function
<code>read_csv</code> rather than read.csv:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="va">penguins</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/penguins_teaching.csv"</span>, col_types <span class="op">=</span> <span class="fu">cols</span><span class="op">(</span>year <span class="op">=</span> <span class="fu">col_character</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">penguins</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
 1 Adelie  Torgersen           39.1          18.7              181        3750
 2 Adelie  Torgersen           39.5          17.4              186        3800
 3 Adelie  Torgersen           40.3          18                195        3250
 4 Adelie  Torgersen           43.9          17.2              201.       4202.
 5 Adelie  Torgersen           36.7          19.3              193        3450
 6 Adelie  Torgersen           39.3          20.6              190        3650
 7 Adelie  Torgersen           38.9          17.8              181        3625
 8 Adelie  Torgersen           39.2          19.6              195        4675
 9 Adelie  Torgersen           34.1          18.1              193        3475
10 Adelie  Torgersen           42            20.2              190        4250
# ℹ 334 more rows
# ℹ 2 more variables: sex &lt;chr&gt;, year &lt;chr&gt;</code></pre>
</div>
<p>We can see that penguins consists of a 344 by 8 <code>tibble</code>.
We see the variable names, and an abbreviation indicating what type of
data is stored in each variable.</p>
<p>A tibble is a way of storing tabular data - a modern version of data
frames, which is part of the tidyverse. Tibbles can for the most part,
be treated like a <code>data.frame</code>.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>R’s standard data structure for tabular data is the
<code>data.frame</code>. In contrast, <code>read_csv()</code> creates a
<code>tibble</code> (also referred to, for historic reasons, as a
<code>tbl_df</code>). This extends the functionality of a
<code>data.frame</code>, and can, for the most part, be treated like a
<code>data.frame</code>.</p>
<p>You may find that some older functions don’t work on tibbles. A
tibble can be converted to a dataframe using
<code>as.data.frame(mytibble)</code>. To convert a data frame to a
tibble, use <code>as.tibble(mydataframe)</code>.</p>
<p>Tibbles behave more consistently than data frames when subsetting
with <code>[]</code>; this will always return another tibble. This isn’t
the case when working with data.frames. You can find out more about the
differences between data.frames and tibbles by typing
<code>vignette("tibble")</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="using-select">Using select()<a class="anchor" aria-label="anchor" href="#using-select"></a>
</h2>
<hr class="half-width">
<p>If, for example, we wanted to move forward with only a few of the
variables in our data frame we could use the <code>select()</code>
function. This will keep only the variables you select.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_island_bmg</span> <span class="op">&lt;-</span> <span class="fu">select</span><span class="op">(</span><span class="va">penguins</span>, <span class="va">year</span>, <span class="va">island</span>, <span class="va">body_mass_g</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">year_island_bmg</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 3
  year  island    body_mass_g
  &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt;
1 2007  Torgersen       3750
2 2007  Torgersen       3800
3 2007  Torgersen       3250
4 2007  Torgersen       4202.
5 2007  Torgersen       3450
6 2007  Torgersen       3650 </code></pre>
</div>
<figure><img src="fig/13-dplyr-fig1.png" alt="Diagram illustrating use of select function to select two columns of a data frame" class="figure mx-auto d-block"></figure><p>If we open up <code>year_island_bmg</code> we’ll see that it only
contains the year, island and body mass (g) Above we used ‘normal’
grammar, but the strengths of <code>dplyr</code> lie in combining
several functions using pipes. Since the pipes grammar is unlike
anything we’ve seen in R before, let’s repeat what we’ve done above
using pipes.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_island_bmg</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span> <span class="fu">select</span><span class="op">(</span><span class="va">year</span>, <span class="va">island</span>, <span class="va">body_mass_g</span><span class="op">)</span></span></code></pre>
</div>
<p>To help you understand why we wrote that in that way, let’s walk
through it step by step. First we summon the penguins data frame and
pass it on, using the pipe symbol <code>|&gt;</code>, to the next step,
which is the <code>select()</code> function. In this case we don’t
specify which data object we use in the <code>select()</code> function
since in gets that from the previous pipe. <strong>Fun Fact</strong>:
There is a good chance you have encountered pipes before in the shell.
In R, a pipe symbol is <code>|&gt;</code> while in the shell it is
<code>|</code> but the concept is the same!</p>
<p>Note that we want to remove one column only from the
<code>penguins</code> data, for example, removing the
<code>island</code> column.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smaller_penguins_data</span> <span class="op">&lt;-</span> <span class="fu">select</span><span class="op">(</span><span class="va">penguins</span>, <span class="op">-</span><span class="va">island</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">smaller_penguins_data</span><span class="op">)</span> <span class="co"># Notice that the island column has been removed</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 7
  species bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex   year
  &lt;chr&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1 Adelie            39.1          18.7              181        3750  male  2007
2 Adelie            39.5          17.4              186        3800  fema… 2007
3 Adelie            40.3          18                195        3250  fema… 2007
4 Adelie            43.9          17.2              201.       4202. male  2007
5 Adelie            36.7          19.3              193        3450  fema… 2007
6 Adelie            39.3          20.6              190        3650  male  2007 </code></pre>
</div>
<div id="tip-renaming-data-frame-columns-in-dplyr" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-renaming-data-frame-columns-in-dplyr" class="callout-inner">
<h3 class="callout-title">Tip: Renaming data frame columns in dplyr</h3>
<div class="callout-content">
<p>In Chapter 4 we covered how you can rename columns with base R by
assigning a value to the output of the <code>names()</code> function.
Just like select, this is a bit cumbersome, but thankfully dplyr has a
<code>rename()</code> function.</p>
<p>Within a pipeline, the syntax is
<code>rename(new_name = old_name)</code>. For example, we may want to
rename the island column name from our <code>select()</code> statement
above.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_bmg</span> <span class="op">&lt;-</span> <span class="va">year_island_bmg</span> <span class="op">|&gt;</span> <span class="fu">rename</span><span class="op">(</span>island_name <span class="op">=</span> <span class="va">island</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">tidy_bmg</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 3
  year  island_name body_mass_g
  &lt;chr&gt; &lt;chr&gt;             &lt;dbl&gt;
1 2007  Torgersen         3750
2 2007  Torgersen         3800
3 2007  Torgersen         3250
4 2007  Torgersen         4202.
5 2007  Torgersen         3450
6 2007  Torgersen         3650 </code></pre>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="using-filter">Using filter()<a class="anchor" aria-label="anchor" href="#using-filter"></a>
</h2>
<hr class="half-width">
<p>If we now want to move forward with the above, but only with
observations for the island of “Dream”, we can combine
<code>select</code> and <code>filter</code></p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dream_year_island_bmg</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">filter</span><span class="op">(</span><span class="va">island</span> <span class="op">==</span> <span class="st">"Dream"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">select</span><span class="op">(</span><span class="va">year</span>, <span class="va">body_mass_g</span><span class="op">)</span></span></code></pre>
</div>
<p>Notice how this code is indented and formatted over multiple lines to
improve readability.</p>
<figure><img src="fig/filter_ccby4_artwork_by_at_allison_horst.png" alt='Cartoon showing three fuzzy monsters either selecting or crossing out rows of a data table. If the type of animal in the table is “otter” and the site is “bay”, a monster is drawing a purple rectangle around the row. If those conditions are not met, another monster is putting a line through the column indicating it will be excluded. Stylized text reads "dplyr::filter() - keep rows that satisfy your conditions."' class="figure mx-auto d-block"><div class="figcaption">filter() keeps rows that satisfy your conditions
-<a href="https://twitter.com/allison_horst" class="external-link">Artwork by <span class="citation">@allison_horst</span></a>
</div>
</figure><p>If we now want to show body mass of penguin species on Dream island
but only for a specific year (e.g., 2007), we can do as below.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dream_island_2007</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">island</span> <span class="op">==</span> <span class="st">"Dream"</span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">species</span>, <span class="va">body_mass_g</span><span class="op">)</span></span></code></pre>
</div>
<p>As with last time, first we pass the penguins data frame to the
<code>filter()</code> function, then we pass the filtered version of the
penguins data frame to the <code>select()</code> function.
<strong>Note:</strong> The order of operations is very important in this
case. If we used ‘select’ first, filter would not be able to find the
variable <code>island</code> since we would have removed it in the
previous step.</p>
</section><section><h2 class="section-heading" id="using-group_by">Using group_by()<a class="anchor" aria-label="anchor" href="#using-group_by"></a>
</h2>
<hr class="half-width">
<p>Now, we were supposed to be reducing the error prone repetitiveness
of what can be done with base R, but up to now we haven’t done that
since we would have to repeat the above for each island Instead of
<code>filter()</code>, which will only pass observations that meet your
criteria (in the above: <code>island=="Dream"</code>), we can use
<code>group_by()</code>, which will essentially use every unique
criteria that you could have used in filter.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>spc_tbl_ [344 × 8] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ species          : chr [1:344] "Adelie" "Adelie" "Adelie" "Adelie" ...
 $ island           : chr [1:344] "Torgersen" "Torgersen" "Torgersen" "Torgersen" ...
 $ bill_length_mm   : num [1:344] 39.1 39.5 40.3 43.9 36.7 ...
 $ bill_depth_mm    : num [1:344] 18.7 17.4 18 17.2 19.3 ...
 $ flipper_length_mm: num [1:344] 181 186 195 201 193 ...
 $ body_mass_g      : num [1:344] 3750 3800 3250 4202 3450 ...
 $ sex              : chr [1:344] "male" "female" "female" "male" ...
 $ year             : chr [1:344] "2007" "2007" "2007" "2007" ...
 - attr(*, "spec")=
  .. cols(
  ..   species = col_character(),
  ..   island = col_character(),
  ..   bill_length_mm = col_double(),
  ..   bill_depth_mm = col_double(),
  ..   flipper_length_mm = col_double(),
  ..   body_mass_g = col_double(),
  ..   sex = col_character(),
  ..   year = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">penguins</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">island</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>gropd_df [344 × 8] (S3: grouped_df/tbl_df/tbl/data.frame)
 $ species          : chr [1:344] "Adelie" "Adelie" "Adelie" "Adelie" ...
 $ island           : chr [1:344] "Torgersen" "Torgersen" "Torgersen" "Torgersen" ...
 $ bill_length_mm   : num [1:344] 39.1 39.5 40.3 43.9 36.7 ...
 $ bill_depth_mm    : num [1:344] 18.7 17.4 18 17.2 19.3 ...
 $ flipper_length_mm: num [1:344] 181 186 195 201 193 ...
 $ body_mass_g      : num [1:344] 3750 3800 3250 4202 3450 ...
 $ sex              : chr [1:344] "male" "female" "female" "male" ...
 $ year             : chr [1:344] "2007" "2007" "2007" "2007" ...
 - attr(*, "spec")=
  .. cols(
  ..   species = col_character(),
  ..   island = col_character(),
  ..   bill_length_mm = col_double(),
  ..   bill_depth_mm = col_double(),
  ..   flipper_length_mm = col_double(),
  ..   body_mass_g = col_double(),
  ..   sex = col_character(),
  ..   year = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt;
 - attr(*, "groups")= tibble [3 × 2] (S3: tbl_df/tbl/data.frame)
  ..$ island: chr [1:3] "Biscoe" "Dream" "Torgersen"
  ..$ .rows : list&lt;int&gt; [1:3]
  .. ..$ : int [1:168] 21 22 23 24 25 26 27 28 29 30 ...
  .. ..$ : int [1:124] 31 32 33 34 35 36 37 38 39 40 ...
  .. ..$ : int [1:52] 1 2 3 4 5 6 7 8 9 10 ...
  .. ..@ ptype: int(0)
  ..- attr(*, ".drop")= logi TRUE</code></pre>
</div>
<p>You will notice that the structure of the data frame where we used
<code>group_by()</code> (<code>grouped_df</code>) is not the same as the
original <code>penguins</code> (<code>data.frame</code>). A
<code>grouped_df</code> can be thought of as a <code>list</code> where
each item in the <code>list</code>is a <code>data.frame</code> which
contains only the rows that correspond to the a particular value
<code>island</code> (at least in the example above).</p>
<p><img src="fig/13-dplyr-fig2-updated.png" alt="Diagram illustrating how the group by function oraganizes a data frame into groups" class="figure">
:::::::::::: callout You may have noticed this output when using the
group_by() function:</p>
<pre><code>`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.</code></pre>
<pre><code>`summarise()` has grouped output by 'year'. </code></pre>
<ul>
<li><p>This indicates that the dataset we are working with was grouped
by a variable (in this case, year) using a function like group_by(year)
before applying summarise().</p></li>
<li><p>The result of summarise() will maintain the grouping structure
unless explicitly changed.</p></li>
</ul>
<pre><code>You can override using the `.groups` argument.</code></pre>
<p>The .groups argument in summarise() lets you control how grouping is
handled in the output. By default, summarise() keeps one level of
grouping intact (i.e., the result remains grouped by any other grouping
variables, if present). You can override this behaviour by specifying
.groups explicitly.</p>
<p>The possible values for .groups are: - “drop_last” (default): Drops
the last grouping variable (e.g., if grouped by year and month, it drops
month but keeps year). - “drop”: Removes all grouping - “keep”: Keeps
all grouping variables intact. ::::::::::::</p>
</section><section><h2 class="section-heading" id="using-summarize">Using summarize()<a class="anchor" aria-label="anchor" href="#using-summarize"></a>
</h2>
<hr class="half-width">
<p>The above was a bit on the uneventful side but
<code>group_by()</code> is much more exciting in conjunction with
<code>summarize()</code>. This will allow us to create new variable(s)
by using functions that repeat for each of the group-specific data
frames. That is to say, using the <code>group_by()</code> function, we
split our original data frame into multiple pieces, then we can run
functions (e.g. <code>mean()</code> or <code>sd()</code>) within
<code>summarize()</code>.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bm_byspecies</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_body_mass_g <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">bm_byspecies</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  species   mean_body_mass_g
  &lt;chr&gt;                &lt;dbl&gt;
1 Adelie               3704.
2 Chinstrap            3733.
3 Gentoo               5069.</code></pre>
</div>
<figure><img src="fig/13-dplyr-fig3-updated.png" alt="Diagram illustrating the use of group by and summarize together to create a new variable" class="figure mx-auto d-block"></figure><p>That allowed us to calculate the mean body_mass_g for each species,
but it gets even better.</p>
<p>The function <code>group_by()</code> allows us to group by multiple
variables. Let’s group by <code>year</code> and
<code>species</code>.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bm_byyear_byspecies</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span>, <span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_body_mass_g <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.</code></pre>
</div>
<p>That is already quite powerful, but it gets even better! You’re not
limited to defining 1 new variable in <code>summarize()</code>.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bm_byyear_byspecies</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span>, <span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span></span>
<span>      mean_body_mass_g <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span>,</span>
<span>      sd_body_mass_g <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.</code></pre>
</div>
</section><section><h2 class="section-heading" id="count-and-n">count() and n()<a class="anchor" aria-label="anchor" href="#count-and-n"></a>
</h2>
<hr class="half-width">
<p>A very common operation is to count the number of observations for
each group. The <code>dplyr</code> package comes with two related
functions that help with this.</p>
<p>For instance, if we wanted to check the number of penguins included
in the dataset for the year 2007, we can use the <code>count()</code>
function. It takes the name of one or more columns that contain the
groups we are interested in, and we can optionally sort the results in
descending order by adding <code>sort=TRUE</code>:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">filter</span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">count</span><span class="op">(</span><span class="va">island</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  island        n
  &lt;chr&gt;     &lt;int&gt;
1 Dream        46
2 Biscoe       44
3 Torgersen    20</code></pre>
</div>
<p>If we need to use the number of observations in calculations, the
<code>n()</code> function is useful. It will return the total number of
observations in the current group rather than counting the number of
observations in each group within a specific column. For instance, if we
wanted to get the standard error of the body mass for penguins on each
island:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">island</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>se_bm <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">/</span><span class="fu">sqrt</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  island    se_bm
  &lt;chr&gt;     &lt;dbl&gt;
1 Biscoe     60.3
2 Dream      37.4
3 Torgersen  61.9</code></pre>
</div>
<p>You can also chain together several summary operations; in this case
calculating the <code>minimum</code>, <code>maximum</code>,
<code>mean</code> and <code>se</code> of body_mass_g on each island:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">island</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span></span>
<span>      mean_bm <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span>,</span>
<span>      min_bm <span class="op">=</span> <span class="fu">min</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span>,</span>
<span>      max_bm <span class="op">=</span> <span class="fu">max</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span>,</span>
<span>      se_bm <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">/</span><span class="fu">sqrt</span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 5
  island    mean_bm min_bm max_bm se_bm
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 Biscoe      4713.   2850   6300  60.3
2 Dream       3713.   2700   4800  37.4
3 Torgersen   3716.   2900   4700  61.9</code></pre>
</div>
</section><section><h2 class="section-heading" id="using-mutate">Using mutate()<a class="anchor" aria-label="anchor" href="#using-mutate"></a>
</h2>
<hr class="half-width">
<p>We can also create new variables prior to (or even after) summarizing
information using <code>mutate()</code>.</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bm_byyear_byisland_byspecies</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>body_mass_kg <span class="op">=</span> <span class="va">body_mass_g</span><span class="op">/</span><span class="fl">1000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span>, <span class="va">island</span>, <span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span></span>
<span>      mean_body_mass_kg <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_kg</span><span class="op">)</span>,</span>
<span>      sd_body_mass_kg <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">body_mass_kg</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'year', 'island'. You can override using
the `.groups` argument.</code></pre>
</div>
<figure><img src="fig/mutate_ccby4_artwork_by_at_allison_horst.png" alt='Cartoon of cute fuzzy monsters dressed up as different X-men characters, working together to add a new column to an existing data frame. Stylized title text reads "dplyr::mutate - add columns, keep existing."' class="figure mx-auto d-block"><div class="figcaption">An illustration of the mutate function <a href="https://twitter.com/allison_horst" class="external-link">Artwork by <span class="citation">@allison_horst</span></a>
</div>
</figure></section><section><h2 class="section-heading" id="connect-mutate-with-logical-filtering-ifelse">Connect mutate with logical filtering: ifelse<a class="anchor" aria-label="anchor" href="#connect-mutate-with-logical-filtering-ifelse"></a>
</h2>
<hr class="half-width">
<p>When creating new variables, we can hook this with a logical
condition. A simple combination of <code>mutate()</code> and
<code>ifelse()</code> facilitates filtering right where it is needed: in
the moment of creating something new. This easy-to-read statement is a
fast and powerful way of discarding certain data (even though the
overall dimension of the data frame will not change) or for updating
values depending on this given condition.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## keeping all data but "filtering" after a certain condition</span></span>
<span><span class="co"># calculate bill length / depth ratio for only for Adelie penguins</span></span>
<span><span class="va">bill_morph_adelie</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>bill_ratio <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Adelie"</span>, <span class="va">bill_length_mm</span><span class="op">/</span><span class="va">bill_depth_mm</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>  </span></code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1</h3>
<div class="callout-content">
<p>Write a single command (which can span multiple lines and includes
pipes) that will produce a data frame with the penguins found on
Torgersen island, including the columns species, body_mass_g, and year,
but not for other islands. How many rows does your data frame have, and
why?</p>
<p>You should start from the <code>penguins</code> tibble.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to Challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_torgersen</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">island</span> <span class="op">==</span> <span class="st">"Torgersen"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">species</span>, <span class="va">body_mass_g</span>, <span class="va">year</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">penguins_torgersen</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 3
  species body_mass_g year
  &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;
1 Adelie        3750  2007
2 Adelie        3800  2007
3 Adelie        3250  2007
4 Adelie        4202. 2007
5 Adelie        3450  2007
6 Adelie        3650  2007 </code></pre>
</div>
<p>Using <code>head(penguins_torgersen)</code> tells us that our output
is “A tibble 52 x 3” i.e. a tibble with 52 rows and 3 columns.</p>
<p>Alternative solutions to find the shape of the tibble:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dim</span><span class="op">(</span><span class="va">penguins_torgersen</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 52  3</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">penguins_torgersen</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 52</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ncol</span><span class="op">(</span><span class="va">penguins_torgersen</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2</h3>
<div class="callout-content">
<p>Calculate the average body mass per species. Which species has the
heaviest average body mass, and which has the lightest?</p>
<p>You should start from the <code>penguins</code> tibble.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to Challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body_mass_by_species</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_body_mass <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">body_mass_by_species</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">mean_body_mass</span> <span class="op">==</span> <span class="fu">min</span><span class="op">(</span><span class="va">mean_body_mass</span><span class="op">)</span> <span class="op">|</span> <span class="va">mean_body_mass</span> <span class="op">==</span> <span class="fu">max</span><span class="op">(</span><span class="va">mean_body_mass</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 2 × 2
  species mean_body_mass
  &lt;chr&gt;            &lt;dbl&gt;
1 Adelie           3704.
2 Gentoo           5069.</code></pre>
</div>
<p>Another way to do this is to use the <code>dplyr</code> function
<code>arrange()</code>, which arranges the rows in a data frame
according to the order of one or more variables from the data frame. It
has similar syntax to other functions from the <code>dplyr</code>
package. You can use <code>desc()</code> inside <code>arrange()</code>
to sort in descending order.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body_mass_by_species</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">mean_body_mass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">head</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  species mean_body_mass
  &lt;chr&gt;            &lt;dbl&gt;
1 Adelie           3704.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body_mass_by_species</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">mean_body_mass</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">head</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  species mean_body_mass
  &lt;chr&gt;            &lt;dbl&gt;
1 Gentoo           5069.</code></pre>
</div>
<p>Alphabetical order works too</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body_mass_by_species</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">head</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 1 × 2
  species mean_body_mass
  &lt;chr&gt;            &lt;dbl&gt;
1 Gentoo           5069.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="advanced-challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="advanced-challenge" class="callout-inner">
<h3 class="callout-title">Advanced Challenge</h3>
<div class="callout-content">
<p>Calculate the average body mass in 2007 of 10 randomly selected
penguins for each species. Then arrange the species names in reverse
alphabetical order. <strong>Hint:</strong> Use the <code>dplyr</code>
functions <code>arrange()</code> and <code>sample_n()</code>, they have
similar syntax to other dplyr functions.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to Advanced Challenge
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body_mass_10penguins_byspecies</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sample_n</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_body_mass <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">body_mass_10penguins_byspecies</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 3 × 2
  species   mean_body_mass
  &lt;chr&gt;              &lt;dbl&gt;
1 Gentoo             4900
2 Chinstrap          3820
3 Adelie             3708.</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode: - <a href="https://r4ds.hadley.nz/" class="external-link">R for
Data Science</a> (online book) - <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" class="external-link">Data
Wrangling Cheat sheet</a> (pdf file) - <a href="https://dplyr.tidyverse.org/" class="external-link">Introduction to dplyr</a> (online
documentation) - <a href="https://www.rstudio.com/resources/webinars/data-wrangling-with-r-and-rstudio/" class="external-link">Data
wrangling with R and RStudio</a> (online video) - <a href="https://jhudatascience.org/tidyversecourse/" class="external-link">Tidyverse Skills for
Data Science</a> (online book)</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use the <code>dplyr</code> package to manipulate data frames.</li>
<li>Use <code>select()</code> to choose variables from a data
frame.</li>
<li>Use <code>filter()</code> to choose data based on values.</li>
<li>Use <code>group_by()</code> and <code>summarize()</code> to work
with subsets of data.</li>
<li>Use <code>mutate()</code> to create new variables.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-06-plot-ggplot2"><p>Content from <a href="06-plot-ggplot2.html">Creating Publication-Quality Graphics with ggplot2</a></p>
<hr>
<p>Last updated on 2024-11-25 |

        <a href="https://github.com/kkh451/r_intro/edit/main/episodes/06-plot-ggplot2.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I create publication-quality graphics in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>To be able to use ggplot2 to generate publication-quality
graphics.</li>
<li>To apply geometry, aesthetic, and statistics layers to a ggplot
plot.</li>
<li>To manipulate the aesthetics of a plot using different colors,
shapes, and lines.</li>
<li>To improve data visualization through transforming scales and
paneling by group.</li>
<li>To save a plot created with ggplot to disk.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Let’s make a new script for this episode, by choosing the menu
options <em>File</em>, <em>New File</em>, <em>R Script</em>.</p>
<p>Although we loaded the tidyverse in the previous episode, we should
make our scripts self-contained, so we should include
<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code> in the new script.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/penguins_teaching.csv"</span>, col_types <span class="op">=</span> <span class="fu">cols</span><span class="op">(</span>year <span class="op">=</span> <span class="fu">col_character</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Plotting our data is one of the best ways to quickly explore it and
the various relationships between variables.</p>
<p>There are three main plotting systems in R, the <a href="https://www.statmethods.net/graphs/index.html" class="external-link">base plotting
system</a>, the <a href="https://www.statmethods.net/advgraphs/trellis.html" class="external-link">lattice</a>
package, and the <a href="https://www.statmethods.net/advgraphs/ggplot2.html" class="external-link">ggplot2</a>
package.</p>
<p>Today we’ll be learning about the ggplot2 package, because it is the
most effective for creating publication-quality graphics.</p>
<p>ggplot2 is built on the grammar of graphics, the idea that any plot
can be built from the same set of components: a <strong>data
set</strong>, <strong>mapping aesthetics</strong>, and graphical
<strong>layers</strong>:</p>
<ul>
<li><p><strong>Data sets</strong> are the data that you, the user,
provide.</p></li>
<li><p><strong>Mapping aesthetics</strong> are what connect the data to
the graphics. They tell ggplot2 how to use your data to affect how the
graph looks, such as changing what is plotted on the X or Y axis, or the
size or color of different data points.</p></li>
<li><p><strong>Layers</strong> are the actual graphical output from
ggplot2. Layers determine what kinds of plot are shown (scatterplot,
histogram, etc.), the coordinate system used (rectangular, polar,
others), and other important aspects of the plot. The idea of layers of
graphics may be familiar to you if you have used image editing programs
like Photoshop, Illustrator, or Inkscape.</p></li>
</ul>
<p>Let’s start off building an example using the penguins data from
earlier. First let’s create a derived data set to plot! Let’s find out
if the mean body mass of the penguins has changed over time.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_bm</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Adelie"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span>, <span class="va">island</span>, <span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_body_mass <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">body_mass_g</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'year', 'island'. You can override using
the `.groups` argument.</code></pre>
</div>
<p>The most basic function is <code>ggplot</code>, which lets R know
that we’re creating a new plot. Any of the arguments we give the
<code>ggplot</code> function are the <em>global</em> options for the
plot: they apply to all layers on the plot.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-blank-ggplot-1.png" alt="Blank plot, before adding any mapping aesthetics to ggplot()." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Here we called <code>ggplot</code> and told it what data we want to
show on our figure. This is not enough information for
<code>ggplot</code> to actually draw anything. It only creates a blank
slate for other elements to be added to.</p>
<p>Now we’re going to add in the <strong>mapping aesthetics</strong>
using the <code>aes</code> function. <code>aes</code> tells
<code>ggplot</code> how variables in the <strong>data</strong> map to
<em>aesthetic</em> properties of the figure, such as which columns of
the data should be used for the <strong>x</strong> and
<strong>y</strong> locations.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">mean_body_mass</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-ggplot-with-aes-1.png" alt="Plotting area with axes for a scatter plot of mean body mass vs year, with no data points visible." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Here we told <code>ggplot</code> we want to plot the “mean_body_mass”
column of the our data frame on the x-axis, and the “year” column on the
y-axis. Notice that we didn’t need to explicitly pass <code>aes</code>
these columns (e.g. <code>x = penguins[, "year"]</code>), this is
because <code>ggplot</code> is smart enough to know to look in the
<strong>data</strong> for that column!</p>
<p>The final part of making our plot is to tell <code>ggplot</code> how
we want to visually represent the data. We do this by adding a new
<strong>layer</strong> to the plot using one of the
<strong>geom</strong> functions.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">mean_body_mass</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-bodymass-vs-year-scatter-1.png" alt="Scatter plot of mean body mass vs year, now showing the data points." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Here we used <code>geom_point</code>, which tells <code>ggplot</code>
we want to visually represent the relationship between
<strong>x</strong> and <strong>y</strong> as a scatterplot of
points.</p>
<p>Notice that we use a “+” sign to add another layer to the plot, not a
pipe “|&gt;” which we’ve previously used to pass the output data from
one data processing step to another step.</p>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1</h3>
<div class="callout-content">
<p>Modify the example so that the figure shows how bill length (mm)
varies with flipper length (mm) instead of body mass :</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguin</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution to challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Here is one possible solution:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguin</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'penguin' not found</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2</h3>
<div class="callout-content">
<p>In the previous examples and challenge we’ve used the
<code>aes</code> function to tell the scatterplot <strong>geom</strong>
about the <strong>x</strong> and <strong>y</strong> locations of each
point. Another <em>aesthetic</em> property we can modify is the point
<em>color</em>. Modify the code from the previous challenge to
<strong>color</strong> the points by the “species” column. What trends
do you see in the data? Are they what you expected?</p>
<p>Hint: Use ?aes or ?ggplot2 to get help on these functions if needed.
::::::::::::::: solution</p>
<div class="section level2">
<h2 id="solution-to-challenge-2">Solution to challenge 2<a class="anchor" aria-label="anchor" href="#solution-to-challenge-2"></a>
</h2>
<p>The solution presented below adds <code>color=species</code> to the
call of the <code>aes</code> function. The general trend seems to
indicate an increased bill length with flipper length. Visual inspection
suggests that the strength of this relationship is similar across all
three species.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span>, color<span class="op">=</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="fig/06-plot-ggplot2-rendered-ch2-sol-1.png" alt="Scatter plot of body mass (g) vs flipper length (mm), with points color-coded by penguin species to show how body mass varies by species and flipper length, thus showing the value of 'aes' function" class="figure mx-auto d-block"><figcaption>
Scatter plot of body mass (g) vs flipper length (mm), with points
color-coded by penguin species to show how body mass varies by species
and flipper length, thus showing the value of ‘aes’ function
</figcaption></figure>
</div>
</div>
</div>
</div>
<p>::::::::::::::::::::::::::::::::::::::::::::::::::</p>
<section><h2 class="section-heading" id="layers">Layers<a class="anchor" aria-label="anchor" href="#layers"></a>
</h2>
<hr class="half-width">
<p>Using a scatterplot probably isn’t the best for visualizing change
over time. Instead, let’s tell <code>ggplot</code> to visualize the data
as a line plot:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">mean_body_mass</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-mbm-line-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Instead of adding a <code>geom_point</code> layer, we’ve added a
<code>geom_line</code> layer.</p>
<p>However, the result doesn’t look quite as we might have expected: it
seems to be jumping around a lot within each year Let’s try to separate
the data by island, plotting one line for each island:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">mean_body_mass</span>, group<span class="op">=</span><span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-mbm-line-by-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Let’s color the lines by island to make things clearer:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">mean_body_mass</span>, group<span class="op">=</span><span class="va">island</span>, color <span class="op">=</span> <span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-mbm-line-by-island-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We’ve added the <strong>group</strong> <em>aesthetic</em>, which
tells <code>ggplot</code> to draw a line for each island.</p>
<p>But what if we want to visualize both lines and points on the plot?
We can add another layer to the plot:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">mean_body_mass</span>, group<span class="op">=</span><span class="va">island</span>, color<span class="op">=</span><span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-mbm-line-point-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>It’s important to note that each layer is drawn on top of the
previous layer. In this example, the points have been drawn <em>on top
of</em> the lines. Here’s a demonstration:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">mean_body_mass</span>, group<span class="op">=</span><span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>color<span class="op">=</span><span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-mbm-layer-example-1-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>In this example, the <em>aesthetic</em> mapping of
<strong>color</strong> has been moved from the global plot options in
<code>ggplot</code> to the <code>geom_line</code> layer so it no longer
applies to the points. Now we can clearly see that the points are drawn
on top of the lines.</p>
<div id="tip-setting-an-aesthetic-to-a-value-instead-of-a-mapping" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-setting-an-aesthetic-to-a-value-instead-of-a-mapping" class="callout-inner">
<h3 class="callout-title">Tip: Setting an aesthetic to a value instead of a mapping</h3>
<div class="callout-content">
<p>So far, we’ve seen how to use an aesthetic (such as
<strong>color</strong>) as a <em>mapping</em> to a variable in the data.
For example, when we use
<code>geom_line(mapping = aes(color=island))</code>, ggplot will give a
different color to each island But what if we want to change the color
of all lines to blue? You may think that
<code>geom_line(mapping = aes(color="blue"))</code> should work, but it
doesn’t. Since we don’t want to create a mapping to a specific variable,
we can move the color specification outside of the <code>aes()</code>
function, like this: <code>geom_line(color="blue")</code>.</p>
</div>
</div>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3</h3>
<div class="callout-content">
<p>Switch the order of the point and line layers from the previous
example. What happened?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution to challenge 3
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The lines now get drawn over the points!</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_bm</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">year</span>, y<span class="op">=</span><span class="va">mean_body_mass</span>, group<span class="op">=</span><span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>color<span class="op">=</span><span class="va">island</span><span class="op">)</span><span class="op">)</span> </span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-ch3-sol-1.png" alt="Scatter plot of mran body mass (g) over time, with lines connecting values for each year and species, demonstrating species-specific trends in body mass across years" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="statistics">Statistics<a class="anchor" aria-label="anchor" href="#statistics"></a>
</h2>
<hr class="half-width">
<p>ggplot2 also makes it easy to overlay statistical models over the
data. To demonstrate we’ll go back to our first challenge:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span>, color<span class="op">=</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-flipper-vs-bill-scatter3-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We can modify the transparency of the points, using the
<em>alpha</em> function, which is especially helpful when you have a
large amount of data which is very clustered.</p>
<div id="tip-reminder-setting-an-aesthetic-to-a-value-instead-of-a-mapping" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-reminder-setting-an-aesthetic-to-a-value-instead-of-a-mapping" class="callout-inner">
<h3 class="callout-title">Tip Reminder: Setting an aesthetic to a value instead of a mapping</h3>
<div class="callout-content">
<p>Notice that we used <code>geom_point(alpha = 0.5)</code>. As the
previous tip mentioned, using a setting outside of the
<code>aes()</code> function will cause this value to be used for all
points, which is what we want in this case. But just like any other
aesthetic setting, <em>alpha</em> can also be mapped to a variable in
the data. For example, we can give a different transparency to each
island with <code>geom_point(mapping = aes(alpha = island))</code>.</p>
</div>
</div>
</div>
<p>We can fit a simple relationship to the data by adding another layer,
<code>geom_smooth</code>:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-lm-fit-1.png" alt="Scatter plot of flipperer length vs bill length with a blue trend line summarising the relationship between variables, and gray shaded area indicating 95% confidence intervals for that trend line." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We can make the line thicker by <em>setting</em> the
<strong>linewidth</strong> aesthetic in the <code>geom_smooth</code>
layer:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_smooth</span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, linewidth<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-lm-fit2-1.png" alt="Scatter plot of flipper length vs bill length with a trend line summarising the relationship between variables. The trend line is slightly thicker than in the previous figure." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>There are two ways an <em>aesthetic</em> can be specified. Here we
<em>set</em> the <strong>linewidth</strong> aesthetic by passing it as
an argument to <code>geom_smooth</code> and it is applied the same to
the whole <code>geom</code>. Previously in the lesson we’ve used the
<code>aes</code> function to define a <em>mapping</em> between data
variables and their visual representation.</p>
<div id="challenge-4a" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4a" class="callout-inner">
<h3 class="callout-title">Challenge 4a</h3>
<div class="callout-content">
<p>Modify the color and size of the points on the point layer in the
plot from Challenge 1 example.</p>
<p>Hint: do not use the <code>aes</code> function.</p>
<p>Hint: the equivalent of <code>linewidth</code> for points is
<code>size</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution to challenge 4a
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Here a possible solution: Notice that the <code>color</code> argument
is supplied outside of the <code>aes()</code> function. This means that
it applies to all data points on the graph and is not related to a
specific variable.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-ch4a-sol-1.png" alt="Scatter plot of average body mass (g) over time, showing enlarged orange data points for each year, connected by lines colored by species." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="challenge-4b" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4b" class="callout-inner">
<h3 class="callout-title">Challenge 4b</h3>
<div class="callout-content">
<p>Modify your solution to Challenge 4a so that the points are now a
different shape and are colored by species.</p>
<p>Hint: (1) The color argument can be used inside the aesthetic. (2)
See this quick reference to find out more about <a href="https://www.sthda.com/english/wiki/ggplot2-point-shapes?title=ggplot2-point-shapes" class="external-link">available
point shapes in R</a></p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solution to challenge 4b
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Here is a possible solution: Notice that supplying the
<code>color</code> argument inside the <code>aes()</code> functions
enables you to connect it to a certain variable. The <code>shape</code>
argument, as you can see, modifies all data points the same way (it is
outside the <code>aes()</code> call) while the <code>color</code>
argument which is placed inside the <code>aes()</code> call modifies a
point’s color based on its species value.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span>, shape <span class="op">=</span> <span class="fl">17</span>, <span class="fu">aes</span><span class="op">(</span>color<span class="op">=</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> </span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-ch4b-sol-1.png" alt="Scatter plot of flipper length (mm) against bill length (mm)." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="multi-panel-figures">Multi-panel figures<a class="anchor" aria-label="anchor" href="#multi-panel-figures"></a>
</h2>
<hr class="half-width">
<p>Earlier we visualized the relationship between bill length and
flipper length across all species in one plot. Alternatively, we can
split this out over multiple panels by adding a layer of
<strong>facet</strong> panels.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span>, color <span class="op">=</span> <span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">species</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-facet-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The <code>facet_wrap</code> layer took a “formula” as its argument,
denoted by the tilde (~). This tells R to draw a panel for each unique
value in the species column of the penguins dataset.</p>
<p>Note that we apply a “theme” definition to rotate the x-axis labels
to maintain readability. Nearly everything in ggplot2 is
customizable.</p>
</section><section><h2 class="section-heading" id="modifying-text">Modifying text<a class="anchor" aria-label="anchor" href="#modifying-text"></a>
</h2>
<hr class="half-width">
<p>To clean this figure up for a publication we need to change some of
the text elements. The x-axis is too cluttered, and the axis labels
should read “Bill Length” and “Flipper Length, rather than the column
names in the data frame.</p>
<p>We can do this by adding a couple of different layers. The
<strong>theme</strong> layer controls the axis text, and overall text
size. Labels for the axes, plot title and any legend can be set using
the <code>labs</code> function. Legend titles are set using the same
names we used in the <code>aes</code> specification. Thus below the
color legend title is set using <code>color = "Island"</code>, while the
title of a fill legend would be set using
<code>fill = "MyTitle"</code>.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span>, color <span class="op">=</span> <span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">species</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Flipper Length (mm)"</span>,              <span class="co"># x axis title</span></span>
<span>    y <span class="op">=</span> <span class="st">"Bill Length (mm)"</span>,   <span class="co"># y axis title</span></span>
<span>    title <span class="op">=</span> <span class="st">"Figure 1"</span>,      <span class="co"># main title of figure</span></span>
<span>    color <span class="op">=</span> <span class="st">"Island"</span>      <span class="co"># title of legend</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-theme-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="exporting-the-plot">Exporting the plot<a class="anchor" aria-label="anchor" href="#exporting-the-plot"></a>
</h2>
<hr class="half-width">
<p>The <code>ggsave()</code> function allows you to export a plot
created with ggplot. You can specify the dimension and resolution of
your plot by adjusting the appropriate arguments (<code>width</code>,
<code>height</code> and <code>dpi</code>) to create high quality
graphics for publication. In order to save the plot from above, we first
assign it to a variable <code>bill_flipper_plot</code>, then tell
<code>ggsave</code> to save that plot in <code>png</code> format to a
directory called <code>results</code>. (Make sure you have a
<code>results/</code> folder in your working directory.)</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bill_flipper_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span>, color <span class="op">=</span> <span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">species</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Flipper Length (mm)"</span>,              <span class="co"># x axis title</span></span>
<span>    y <span class="op">=</span> <span class="st">"Bill Length (mm)"</span>,   <span class="co"># y axis title</span></span>
<span>    title <span class="op">=</span> <span class="st">"Figure 1"</span>,      <span class="co"># main title of figure</span></span>
<span>    color <span class="op">=</span> <span class="st">"Island"</span>      <span class="co"># title of legend</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggsave</span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"results/bill_flipper_plot.png"</span>, plot <span class="op">=</span> <span class="va">bill_flipper_plot</span>, width <span class="op">=</span> <span class="fl">12</span>, height <span class="op">=</span> <span class="fl">10</span>, dpi <span class="op">=</span> <span class="fl">300</span>, units <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span></span></code></pre>
</div>
<p>There are two nice things about <code>ggsave</code>. First, it
defaults to the last plot, so if you omit the <code>plot</code> argument
it will automatically save the last plot you created with
<code>ggplot</code>. Secondly, it tries to determine the format you want
to save your plot in from the file extension you provide for the
filename (for example <code>.png</code> or <code>.pdf</code>). If you
need to, you can specify the format explicitly in the
<code>device</code> argument.</p>
<p>This is a taste of what you can do with ggplot2. RStudio provides a
really useful <a href="https://www.rstudio.org/links/data_visualization_cheat_sheet" class="external-link">cheat
sheet</a> of the different layers available, and more extensive
documentation is available on the <a href="https://ggplot2.tidyverse.org/reference/" class="external-link">ggplot2 website</a>. All
RStudio cheat sheets are available from the <a href="https://www.rstudio.com/resources/cheatsheets/" class="external-link">RStudio
website</a>. Finally, if you have no idea how to change something, a
quick Google search will usually send you to a relevant question and
answer on Stack Overflow with reusable code to modify!</p>
<div id="challenge-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-5" class="callout-inner">
<h3 class="callout-title">Challenge 5</h3>
<div class="callout-content">
<p>Generate a boxplot to compare flipper length between species.</p>
<p>Advanced:</p>
<ul>
<li>Add axis labels</li>
<li>Hide the legend</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solution to Challenge 5
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Here a possible solution: <code>xlab()</code> and <code>ylab()</code>
set labels for the x and y axes, respectively The axis title, text and
ticks are attributes of the theme and must be modified within a
<code>theme()</code> call.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, y <span class="op">=</span> <span class="va">flipper_length_mm</span>, fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Species"</span>,              <span class="co"># x axis title</span></span>
<span>    y <span class="op">=</span> <span class="st">"Flipper Length (mm)"</span>,   <span class="co"># y axis title</span></span>
<span>  <span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/06-plot-ggplot2-rendered-ch5-sol-1.png" alt="Boxplot comparing flipper length (mm) across penguin species, with labeled axes showing species on the x-axis and flipper length on the y-axis, and the legend hidden for a cleaner view." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<div class="section level3">
<h3 id="ggplot2">ggplot2<a class="anchor" aria-label="anchor" href="#ggplot2"></a>
</h3>
<ul>
<li><a href="https://ggplot2-book.org/" class="external-link">ggplot2: Elegant Graphics for
Data Analysis (3e)</a></li>
<li><a href="https://www.statmethods.net/advgraphs/ggplot2.html" class="external-link">ggplot2</a></li>
<li><a href="https://www.rstudio.org/links/data_visualization_cheat_sheet" class="external-link">cheat</a></li>
<li><a href="https://ggplot2.tidyverse.org/reference/" class="external-link">ggplot-doc</a></li>
</ul>
</div>
<div class="section level3">
<h3 id="other-plotting-systems">Other Plotting Systems<a class="anchor" aria-label="anchor" href="#other-plotting-systems"></a>
</h3>
<ul>
<li>
<a href="https://www.statmethods.net/graphs/index.html" class="external-link">base</a><a href="https://www.statmethods.net/graphs/index.html" class="external-link uri">https://www.statmethods.net/graphs/index.html</a>
</li>
<li>
<a href="https://www.statmethods.net/advgraphs/trellis.html" class="external-link">lattice</a><a href="https://www.statmethods.net/advgraphs/trellis.html" class="external-link uri">https://www.statmethods.net/advgraphs/trellis.html</a>
</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>ggplot2</code> to create plots.</li>
<li>Think about graphics in layers: aesthetics, geometry, statistics,
scale transformation, and grouping.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-07-wrap"><p>Content from <a href="07-wrap.html">Wrap-up</a></p>
<hr>
<p>Last updated on 2024-11-25 |

        <a href="https://github.com/kkh451/r_intro/edit/main/episodes/07-wrap.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are the next steps in learning R to further your R coding
skills?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Reflect on the key topics covered in this course and identify areas
for further study to enhance your R skills.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this course, we have introduced you to the basics of
<strong>R</strong> and <strong>RStudio</strong> and demonstrated how
these tools can be used for <strong>scientific analysis</strong>. The
concepts and techniques you’ve learned here are essential to getting
started with R, but there is much more to explore. Learning R is a
journey, and you will find additional topics and tools that are vital
for working effectively in your domain.</p>
<p>Some of the topics we touched on briefly, or didn’t have time to
explore in depth, will be critical for your continued success with R.
Here, we’ll highlight a few areas that you should prioritize as you
continue your R journey.</p>
<section><h2 class="section-heading" id="topics-to-explore-further">Topics to Explore Further<a class="anchor" aria-label="anchor" href="#topics-to-explore-further"></a>
</h2>
<hr class="half-width">
<p>While this course covered the essentials, some key topics were only
mentioned in passing or were not included. It is important to delve
deeper into these areas to fully leverage R for your research.</p>
<div class="section level3">
<h3 id="factors">Factors<a class="anchor" aria-label="anchor" href="#factors"></a>
</h3>
<ul>
<li>Factors are a specific data type in R used to represent
<strong>categorical variables with discrete levels</strong>. They are
essential for performing statistical analysis on categorical data.</li>
<li>If you plan to analyze survey data, experimental treatments, or any
other dataset involving categories, learning how to create and
manipulate factors is crucial.</li>
<li>See <a href="https://r4ds.hadley.nz/factors.html" class="external-link">Chapter 16
Factors</a> in R for Data Science (2e) by Hadley Wickham.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-structures-matrices-and-arrays">Data Structures: Matrices and Arrays<a class="anchor" aria-label="anchor" href="#data-structures-matrices-and-arrays"></a>
</h3>
<ul>
<li>Matrices and arrays are foundational data structures in R, used to
represent multi-dimensional data.</li>
<li>These structures are particularly important if you intend to:
<ul>
<li>Work with numerical computations across multi-dimensional
datasets.</li>
<li>Develop your own statistical R packages or perform advanced
simulations.</li>
</ul>
</li>
<li>Understanding these data structures will give you greater
flexibility and power in how you handle and process data.</li>
<li>See <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures.html" class="external-link">Chapter
13 - Data Types and Structures</a> in the Software Carpentry Course
“Programming with R”</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="next-steps-in-self-learning">Next Steps in Self-Learning<a class="anchor" aria-label="anchor" href="#next-steps-in-self-learning"></a>
</h2>
<hr class="half-width">
<p>In order to build on what you’ve learned in this course, we also
recommend focusing on the following topics next:</p>
<ol start="2" style="list-style-type: decimal">
<li>
<strong>Control Flow</strong>
<ul>
<li>Mastering control flow (e.g., <code>if</code>, <code>else</code>,
<code>for</code>, <code>while</code>) is key to automating repetitive
tasks and writing efficient scripts.</li>
<li><a href="https://swcarpentry.github.io/r-novice-gapminder/07-control-flow.html" class="external-link">See
Episode 7 - Control Flow in R for Reproducible Scientific
Analysis</a></li>
</ul>
</li>
<li>
<strong>Functions</strong>
<ul>
<li>Writing your own functions will allow you to reuse code, making your
analyses more modular and less prone to error.</li>
<li><a href="https://swcarpentry.github.io/r-novice-gapminder/10-functions.html" class="external-link">See
Episode 10 - Functions Explained in R for Reproducible Scientific
analysis</a></li>
</ul>
</li>
<li>
<strong>Data Frame Manipulation with <code>tidyr</code></strong>
<ul>
<li>Learn how to reshape, clean, and organize data efficiently.</li>
<li>Tackle more complex data wrangling problems that cannot be solved
with dplyr alone.</li>
<li>This is especially useful for preprocessing datasets before
analysis.</li>
<li><a href="https://swcarpentry.github.io/r-novice-gapminder/10-functions.html" class="external-link">See
Episode 13 - Data Frame Manipulation with tidyr in R for Reproducible
Scientific analysis</a></li>
</ul>
</li>
</ol></section><section><h2 class="section-heading" id="looking-ahead">Looking Ahead<a class="anchor" aria-label="anchor" href="#looking-ahead"></a>
</h2>
<hr class="half-width">
<p>The skills you’ve gained here form a strong foundation for using R in
scientific research. As you continue to practice and explore R, remember
that your growing your coding expertise will help: - Your
<strong>team</strong>, by making your work accessible and reproducible.
- Your <strong>peers</strong>, by sharing scripts and workflows that
others can understand and build upon. - The <strong>broader scientific
community</strong>, by contributing to open, transparent, and impactful
research.</p>
</section><section><h2 class="section-heading" id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>Please check out <a href="reference.html#litref">the following
resources</a> for additional materials and recommendations to deepen
your understanding of R and R Studio.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>This course covered the essentials of R and RStudio for reproducible
analysis, providing a strong foundation for further learning.</li>
<li>Topics such as <strong>factors</strong>, <strong>matrices and
arrays</strong>, and more advanced concepts like <strong>data frame
manipulation with <code>tidyr</code></strong>, <strong>control
flow</strong>, and <strong>functions</strong> are critical next
steps.</li>
<li>Continued practice and exploration of R will benefit you, your team,
and the wider research community.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/kkh451/r_intro/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/kkh451/r_intro/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/kkh451/r_intro/" class="external-link">Source</a></p>
				<p><a href="https://github.com/kkh451/r_intro/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:k.r.kopec-harding@bham.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.10" class="external-link">sandpaper (0.16.10)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://kkh451.github.io/r_intro/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "R, RStudio, Tidyverse, lesson",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://kkh451.github.io/r_intro/aio.html",
  "identifier": "https://kkh451.github.io/r_intro/aio.html",
  "dateCreated": "2024-09-01",
  "dateModified": "2024-11-25",
  "datePublished": "2024-11-25"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

